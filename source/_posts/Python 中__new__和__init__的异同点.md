---
title: Python 中__new__和__init__的异同点
date: 2022-1-14 11:50:30
---

同: 二者均是Python面向对象语言中的函数，__new__比较少用，__init__则用的比较多

异: 

+ ```__new__```是在实例创建之前被调用的，因为它的任务就是创建实例然后直接返回该实例对象，是个**静态方法**
+ ```__init__```是当实例对象创建完成后被调用的，然后设置对象属性的一些初始值，通常在初始化一个类实例的时候被调用，是一个**实例方法**

总结来说也就是: ```__new__```先被调用，```__init__```后被调用，```__new__```的返回值（实例）将传递给```__init__```方法的第一个参数，然后```__init__```给这个实例设置一些参数

一些说明:

1. 继承自object的新式类才有```__new__```
2. ```__new__```至少要有一个参数cls，代表当前类，此参数在实例化时由Python解释器自动识别
3. ```__new__```**必须要有返回值**，返回实例化出来的实例，这点在自己实现```__new__```时要特别注意，可以return父类```__new__```出来的实例，或者是直接object```__new__```出来的 实例
4. ```__init__```有一个参数self，这个就是```__new__```返回的实例，```__init__```在```__new__```的基础上可以完成一些其它初始化的操作，```__init__```**不需要返回值**
5. 如果```__new__```创建的是当前类的实例，会自动调用```__init__```函数，通过return语句里面调用的```__new__```函数的第一个参数是cls来保证是当前类实例，如果是其它类的类名，那么实际创建返回的就是其他类的实例
6. 在定义子类时没有重新定义```__new__```时，Python默认是调用该类的直接父类的```__new__```来构造该类的实例，如果该类的父类也没有重写```__new__```，那么将一直按此规矩追溯至object的```__new__```方法，因为object是所有新式类的基类
7. 而如果子类中重写了```__new__```，那么你可以自由选择任意一个的其他新式类(必定要是新式类，只有新式类必定都有```__new__```，因为所有新式类都是object的后代，而经典类则没有```__new__```方法)的```__new__```方法来制造实例
8. 对于子类的```__init__```，其调用规制跟```__new__```是一致的，当然如果子类和父类的```__init__```都想调用，可以在子类的```__init__```中加入对父类```__init__```的调用
9. 我们在使用时，尽量使用```__init__```，不要去自定义```__new__```，因为这两者在继承派生时的特性还是很不一样的
10. **将类比作制造商，```__new__```方法就是前期的原料购买环节，```__init__```方法就是在原有材料的基础上加工、初始化商品化环节**