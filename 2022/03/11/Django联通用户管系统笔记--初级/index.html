<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Lhj">
    
    <title>
        
            Django项目体验--Django安装 |
        
        Alexander
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.svg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":false},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                Alexander
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                NOTE
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                ABOUT
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">NOTE</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ABOUT</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Django项目体验--Django安装</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.svg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Lhj</span>
                        
                            <span class="author-label">Lv6</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-03-11 16:49:30</span>
        <span class="mobile">2022-03-11 16:49</span>
    </span>
    
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>20.9k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>88 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h3 id="安装Django"><a href="#安装Django" class="headerlink" title="安装Django"></a>安装Django</h3><p>使用一下命令:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django</span><br></pre></td></tr></table></figure>

<p>安装完成之后，会分别安装两个东西:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">c:python37</span><br><span class="line">    - python.exe</span><br><span class="line">    - Scripts</span><br><span class="line">    	- pip.exe</span><br><span class="line">        - django-admin.exe	【一个工具，用于创建django项目的文件和文件夹】</span><br><span class="line">    - lib</span><br><span class="line">    	- 内置模块</span><br><span class="line">        - site-packages</span><br><span class="line">        	- openpyxl</span><br><span class="line">            - python-docx</span><br><span class="line">            - flask</span><br><span class="line">            - django  【框架的源码，网站就需要用到里面所封装的功能】</span><br></pre></td></tr></table></figure>

<p>相比于flask，flask会比较简便，而django因为涉及到的组件很多，在一开始打开django项目我们就会发现有很多已经创建好的文件夹，这就是<code>django-admin</code>做到的，</p>
<h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><h4 id="终端创建"><a href="#终端创建" class="headerlink" title="终端创建"></a>终端创建</h4><p>django项目中会有一些默认的文件和默认的文件夹，这些是需要手动敲命令去创建的</p>
<ul>
<li><p>打开终端</p>
</li>
<li><p>进入某个目录(项目所存放的位置)，例如:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/user/LHJ/PythonProjects/DjangoProjects/LianTongUserManage</span><br></pre></td></tr></table></figure></li>
<li><p>执行命令创建项目</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;c:python37\Scripts\django-admin.exe&quot;</span> startproject 项目名称</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果&quot;c:python37\Scripts&quot;已经加入系统环境变量，就可以直接在终端中使用django-admin这个命令:</span></span><br><span class="line">django-admin startproject 项目名称</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Pycharm创建"><a href="#Pycharm创建" class="headerlink" title="Pycharm创建"></a>Pycharm创建</h4><p>其实Pycharm创建和上面使用命令行创建是一样的，只不过是把相关命令集成成了一些按钮</p>
<p>打开pycharm，然后点击new project再选择Django，然后选择django项目所存放的路径和解释器，如果是虚拟环境就选虚拟环境，其实推荐使用虚拟环境</p>
<h4 id="两种方式对比"><a href="#两种方式对比" class="headerlink" title="两种方式对比"></a>两种方式对比</h4><ul>
<li><p>命令行创建的项目是比较标准的</p>
</li>
<li><p>pycharm在标准的基础上默认加了以下东西:</p>
<ul>
<li><p>创建了一个templates目录，最好删除</p>
</li>
<li><p>因为创建了templates目录，所以在settings.py中templates列表中也会比命令行创建的项目的settings.py多一个路径，如果删除了这个目录，这个路径也最好清除</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/boPQwn"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/11/boPQwn.png"
                      alt="boPQwn.png"
                ></a></p>
<p>这加的这一句的意思就是以后我们找模板就去最外层这个templates目录去找</p>
</li>
</ul>
</li>
</ul>
<h3 id="项目默认文件介绍"><a href="#项目默认文件介绍" class="headerlink" title="项目默认文件介绍"></a>项目默认文件介绍</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">LianTongUserManage</span><br><span class="line">	manage.py            【项目的管理、启动项目、创建app、数据管理】默认放着不要动【常常用】</span><br><span class="line">    LianTongUserManage	 </span><br><span class="line">    	__init__.py</span><br><span class="line">        asgi.py          【接收网络请求】默认放着不要动，异步的，这是Django3才支持的</span><br><span class="line">        settings.py		 【项目配置文件，例如连接数据库、注册app等】【常常修改】</span><br><span class="line">        urls.py			 【URL和函数的对应关系，这个是常常操作的】【常常修改】</span><br><span class="line">        wsgi.py          【接收网络请求】默认放着不要动，同步的</span><br></pre></td></tr></table></figure>

<p>flask的配置文件很多都是已经集成在内部</p>
<h3 id="App的创建和说明"><a href="#App的创建和说明" class="headerlink" title="App的创建和说明"></a>App的创建和说明</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- 项目</span><br><span class="line">	- app, 用户管理【可以是独立的表结构、独立的函数、独立的HTML模板、独立的CSS样式】</span><br><span class="line">    - app, 订单管理【可以是独立的表结构、独立的函数、独立的HTML模板、独立的CSS样式】</span><br><span class="line">	- app, 后台管理【可以是独立的表结构、独立的函数、独立的HTML模板、独立的CSS样式】</span><br><span class="line">    ...</span><br><span class="line">注意: 我们开发比较简洁，用不到多app，一般情况下，都是一个项目下创建一个app</span><br></pre></td></tr></table></figure>

<p>使用以下命令创建:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp app01</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bouQiQ"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/11/bouQiQ.png"
                      alt="bouQiQ.png"
                ></a></p>
<p>来看看app里面的文件:</p>
<p>这里以app01为例:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bouXFg"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/11/bouXFg.png"
                      alt="bouXFg.png"
                ></a></p>
<ul>
<li>apps.py: 固定的不用动，app启动类</li>
<li>migrations: 一般来说也不用动，它是用于对数据库的字段进行修改的时候用来做记录的</li>
<li>test.py: 一般来说也不用动，是用于做单元测试的，一般小项目也用不到</li>
<li>admin.py: 一般来说也不用动，这是为后台提供admin功能，django默认提供了admin后台管理</li>
<li>views.py: 这是比较重要的，url对应的函数就在这里编写</li>
<li>models.py: 这也是比较重要的，对数据操作，因为django封装了一个orm以供使用</li>
</ul>
<h3 id="启动运行Django"><a href="#启动运行Django" class="headerlink" title="启动运行Django"></a>启动运行Django</h3><h4 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h4><ul>
<li><p>确保app已注册(settings.py)</p>
<p>刚刚我们创建了app，在使用app之前我们要先注册这个app，打开settings.py，然后找到INSTALLED_APPS这个列表，然后把我们创建的app加入进去，那么该怎么写呢，如下图所示:</p>
<p>我们主要就是加入一个路径</p>
<p>在app01目录下有一个apps.py，然后里面有一个类叫App01Config然后下面有一个name叫app01，就写这个路径，<code>app01.apps.App01Config</code>，通过这个路径就能找到名字为app01的app</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/b7d3lt"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/12/b7d3lt.png"
                      alt="b7d3lt.png"
                ></a></p>
</li>
<li><p>编写URL和视图函数对应关系(urls.py)</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/b7wCB8"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/12/b7wCB8.png"
                      alt="b7wCB8.png"
                ></a></p>
<p>打开urls.py我们会看到如上图所示，其中红框中的<code>urlpatterns</code>列表就是记录url和相应试图处理函数的对应关系，里面默认会有一个<code>admin/</code>和<code>admins.site.urls</code>，前者是一个路径，后面是访问这个路径所触发的函数，我们可以再举个例子:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/b70Fr6"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/12/b70Fr6.png"
                      alt="b70Fr6.png"
                ></a></p>
</li>
<li><p>编写视图函数(views.py)</p>
<p>我们在app01目录下的views.py编写index函数，这个函数默认要有一个参数<code>requests</code>:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/b7BiWj"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/12/b7BiWj.png"
                      alt="b7BiWj.png"
                ></a></p>
</li>
<li><p>启动Django项目</p>
<ul>
<li><p>命令行启动，可以指定端口</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver</span><br></pre></td></tr></table></figure></li>
<li><p>Pycharm启动，在设置中也可以指定端口</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/b7D34g"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/12/b7D34g.png"
                      alt="b7D34g.png"
                ></a></p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/b7rCxs"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/12/b7rCxs.png"
                      alt="b7rCxs.png"
                ></a></p>
</li>
</ul>
<h4 id="再写一个页面"><a href="#再写一个页面" class="headerlink" title="再写一个页面"></a>再写一个页面</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url -&gt; 函数</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bHcGrj"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/12/bHcGrj.png"
                      alt="bHcGrj.png"
                ></a></p>
<h3 id="模板和静态文件"><a href="#模板和静态文件" class="headerlink" title="模板和静态文件"></a>模板和静态文件</h3><p>前面我们已经写了一个快速上手，但是我们感觉还是有点欠缺，这应该返回一大堆的html代码，那django中能不能也给我们返回html呢，答案当然是肯定的，如果只是想返回一个普通的字符串，就可以直接用<code>HttpResponse</code>，如果想返回一个html，就不能在view.py中简单地<code>return</code>一个<code>HttpResponse</code>了，应该是<code>return</code>一个<code>render</code>，<code>render</code>的第一个参数也是request，第二个参数就写html文件，在<code>render</code>的内部就会自动帮你寻找这个文件，并把这个文件的内容读取到内存然后以供使用，那么问题来了，Django会去哪个目录下找这个html文件呢，我们可以在当前app的目录下新建一个templates文件夹，然后在里面新建一个html文件，views.py会默认在app目录下的templates目录下找html文件</p>
<p>我们在views.py中添加一个UserList的路由，并指定一个视图函数，然后再新建一个templates文件夹，并在里面新建一个UserList.html文件，如下图所示:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bHToVO"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/12/bHToVO.png"
                      alt="bHToVO.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bHTOxI"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/12/bHTOxI.png"
                      alt="bHTOxI.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bH7pdS"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/12/bH7pdS.png"
                      alt="bH7pdS.png"
                ></a></p>
<p>上面说的是会在当前app下的templates目录寻找对应views.py中的html文件，实际上会根据app的注册顺序，逐一去他们的templates目录中找，目前这里是只有一个app01，如果还有app02、app03，并且已经注册，也就是已经写入到了settings.py中的INSTALLED_APPS列表中，就会先去app01的templates中找，然后再去app02的templates中找，再去app03，这样按顺序找下去</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bHHiTO"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/12/bHHiTO.png"
                      alt="bHHiTO.png"
                ></a></p>
<p>关于模板这里再多提一嘴，如果你在项目的根目录下也有一个templates目录，并且项目还是会从app里面的templates目录里面找相关的html文件，默认情况下项目只会从app里面的templates目录里面找相关的html文件，如果你要看别人的网站，我们就要打开settings.py文件，看看TEMPLATES列表，是否有以下情况:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bb4Jx0"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bb4Jx0.png"
                      alt="bb4Jx0.png"
                ></a></p>
<p>如果出现了上图红框中所标注的代码，那就说明项目会默认从项目根目录的templates中找html相关代码，一般Pycharm专业版创建的项目就会自动在项目的根目录创建一个templates目录，然后再在settings.py中加上上图所示的代码</p>
<p>如果我们把这个根目录下的templates目录删除或者里面没有放我们想要的html代码，项目会再接着从项目app的注册顺序找</p>
<p>在开发过程中，一般将:</p>
<ul>
<li>图片</li>
<li>CSS</li>
<li>JS</li>
</ul>
<p>都会当作静态文件处理</p>
<p>在django中，静态文件不能乱放，一般会在当前app目录下新建一个static目录，里面去放一些静态文件，如下，我们在app01目录下新建了一个static目录，然后里面放了一个1.jpeg，然后我们在UserList.html文件中导入了这个图片，如下图所示:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bb7JDP"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bb7JDP.png"
                      alt="bb7JDP.png"
                ></a></p>
<p>运行效果如下:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bb7wCQ"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bb7wCQ.png"
                      alt="bb7wCQ.png"
                ></a></p>
<p>这里需要注意的是，static目录的名字只能为static，如果为其他的可能会出现展现不出静态文件的问题</p>
<p>一般来说，我们会在static目录下再进行细分，一般会有以下4个小分类:</p>
<ul>
<li>css</li>
<li>img</li>
<li>js</li>
<li>plugins</li>
</ul>
<p>刚刚我们的1.jpeg就可以放在img目录下，那么相应的路径就可以修改为<code>/static/img/1.jpeg</code></p>
<p>如果有什么css或者js就可以对号入座放在对应的目录下，如下图所示，我们就引入了相应的js框架和bootstrap组件:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqkgZ8"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqkgZ8.png"
                      alt="bqkgZ8.png"
                ></a></p>
<p>其实在html文件中我们可以使用刚刚那种方式<code>/static/img/1.jpeg</code>来导入一个静态文件，但是Django推荐使用<code>&#123;load static&#125;</code>这种模板语法来实现导入，如下图所示:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqm5z4"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqm5z4.png"
                      alt="bqm5z4.png"
                ></a></p>
<p>如果像之前那样写死了就不好，因为一但项目上线就需要修改所有的路径，而如果后期static文件的路径变了或者放静态文件的文件夹不叫static了，我们也只需要在settings.py中配置下配置下STATIC_URL即可:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bquYUP"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bquYUP.png"
                      alt="bquYUP.png"
                ></a></p>
<p>既然导入了bootstrap，我们来确认下是否导入成功:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqKYL9"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqKYL9.png"
                      alt="bqKYL9.png"
                ></a></p>
<p>写了一个按钮，我们来看看效果:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqKDzD"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqKDzD.png"
                      alt="bqKDzD.png"
                ></a></p>
<p>这就说明导入成功了</p>
<h3 id="Django的模板语法"><a href="#Django的模板语法" class="headerlink" title="Django的模板语法"></a>Django的模板语法</h3><p>本质: 在HTML中写一些占位符，由数据对这些占位符进行替换和处理</p>
<p>下面我们来写上一个URL来专门学习下这个模板语法:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqQLGV"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqQLGV.png"
                      alt="bqQLGV.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqlCI1"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqlCI1.png"
                      alt="bqlCI1.png"
                ></a></p>
<p>我们分屏打开views.py和tpl.html这两个文件来看看模板语法的使用:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bq1Q0J"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bq1Q0J.png"
                      alt="bq1Q0J.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bq1Gfx"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bq1Gfx.png"
                      alt="bq1Gfx.png"
                ></a></p>
<p>我们来复习下刚才的逻辑，当我们在浏览器地址栏键入<code>http://127.0.0.1:8000/tpl/</code>，就会触发views.py中的tpl函数，继而触发hpl.html文件，从而在浏览器中就会显示相应的界面；</p>
<p>我们在页面中可以随便写东西，比如写个<code>&lt;h1&gt;&lt;h1&gt;</code>:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bq8wFA"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bq8wFA.png"
                      alt="bq8wFA.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bq82wQ"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bq82wQ.png"
                      alt="bq82wQ.png"
                ></a></p>
<p>这是我们写死了的，但是以后我们如果想从数据库或者从什么地方获取了数据，然后想把数据放在html文件中，然后显示出来，该怎么写呢?</p>
<p>可以像如下图一样写:</p>
<p>下图只是举了个例子而已哈</p>
<p>下面我们在vies.py中给了个数据叫name，值是韩超，当然开发中绝对不可能这样写的，然后我们在render函数中要写入一个字典，值和数据的变量名一致，键可以自己指定，那么对应着，在html文件中，我们可以直接用所谓的模板语法写上一个双花括号，然后里面放一个n1，也就是刚刚在views.py中给定的键名，这样在html文件中就可以访问该数据了</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqGjHg"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqGjHg.png"
                      alt="bqGjHg.png"
                ></a></p>
<p>运行效果如下:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqJivV"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqJivV.png"
                      alt="bqJivV.png"
                ></a></p>
<p>这里记住一个点，显示单独的一个值就直接花括号加变量的键即可</p>
<p>现在我们又有个列表，可否把这个列表的数据也展现在前端页面上?，当然是可以的</p>
<p>我们又添加一个roles列表，和上面的操作是一样一样的:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqYpZD"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqYpZD.png"
                      alt="bqYpZD.png"
                ></a></p>
<p>如果我们直接用双花括号然后包裹着n2会是什么效果呢</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqYQij"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqYQij.png"
                      alt="bqYQij.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqYyy6"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqYyy6.png"
                      alt="bqYyy6.png"
                ></a></p>
<p>两个花括号括起来的话，就会原封不动地显示该变量，是个列表就显示列表</p>
<p>很显然，这种方式显示比较不友好，我们如何将列表拆分然后将每个列表中的元素取到呢？</p>
<p>是否可以<code>n2[0]</code>呢?，这样是不可以的，行不通的，如果非要用取索引的方式的话，那也应该使用<code>n2.0</code>，<code>n2.1</code>这种方式，如下图所示:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqt8tH"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqt8tH.png"
                      alt="bqt8tH.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqtUjP"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqtUjP.png"
                      alt="bqtUjP.png"
                ></a></p>
<p>如果列表中有很多个数据，那么通过上图的方法那未免有点捉襟见肘，其实我们可以使用for循环</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqNivt"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqNivt.png"
                      alt="bqNivt.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqNuCj"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqNuCj.png"
                      alt="bqNuCj.png"
                ></a></p>
<p>如果你现在有一个字典，如下图所示:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqa8NF"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqa8NF.png"
                      alt="bqa8NF.png"
                ></a></p>
<p>如果想将这个字典的信息也想放在模板语法中让它给处理下，应该怎么写呢?</p>
<p>我们也可以像之前那样直接用显示一个变量的方式来显示这个字典，但是这显然不是我们想要的:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqdADx"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqdADx.png"
                      alt="bqdADx.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqduPe"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqduPe.png"
                      alt="bqduPe.png"
                ></a></p>
<p>我们想要的是获取字典中的值，那么我们就可以通过键来获取:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqdd2j"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqdd2j.png"
                      alt="bqdd2j.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqdDrq"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqdDrq.png"
                      alt="bqdDrq.png"
                ></a></p>
<p>对于字典来讲，他也是一个可迭代对象，也是支持for循环的，那么这里的字典也是可以使用for循环的，如下图所示:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqrQBR"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqrQBR.png"
                      alt="bqrQBR.png"
                ></a></p>
<p>字典可以循环keys也可以循环values，上面我循环的是keys，items就是键和值，例如:<code>for k, v in n3.items</code>，如果不写items或者keys或者values那默认就是keys</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqr7CT"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqr7CT.png"
                      alt="bqr7CT.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqrIU0"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqrIU0.png"
                      alt="bqrIU0.png"
                ></a></p>
<p>上面是使用的是列表，其实使用元组也是一样的</p>
<p>如果是列表套字典，其实那也是一样的，遍历列表再遍历里面的字典，或者通过“下标操作”也是可行的</p>
<p>举个例子说:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqvcJP"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqvcJP.png"
                      alt="bqvcJP.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqv2z8"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqv2z8.png"
                      alt="bqv2z8.png"
                ></a></p>
<p>下面是循环操作:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqxZeH"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqxZeH.png"
                      alt="bqxZeH.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bqxMfP"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bqxMfP.png"
                      alt="bqxMfP.png"
                ></a></p>
<p>模板语法也支持逻辑判断:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLiFN4"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bLiFN4.png"
                      alt="bLiFN4.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLiEC9"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bLiEC9.png"
                      alt="bLiEC9.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLiUDf"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bLiUDf.png"
                      alt="bLiUDf.png"
                ></a></p>
<p>到这里我们要清楚一点，通过URL找到views.py中视图函数后，会在render函数内读取templates里面的含模板语法的html文件，然后进行内容的替换，然后再返回给用户浏览器</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLibKx"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bLibKx.png"
                      alt="bLibKx.png"
                ></a></p>
<h4 id="案例-伪联通新闻中心"><a href="#案例-伪联通新闻中心" class="headerlink" title="案例: 伪联通新闻中心"></a>案例: 伪联通新闻中心</h4><p>首先我们写上一个URL:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLEHYD"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bLEHYD.png"
                      alt="bLEHYD.png"
                ></a></p>
<p>然后再定义一个视图函数:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLVPfg"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bLVPfg.png"
                      alt="bLVPfg.png"
                ></a></p>
<p>再定义一个html文件:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLVEXn"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bLVEXn.png"
                      alt="bLVEXn.png"
                ></a></p>
<p>运行效果为:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLVMhF"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/13/bLVMhF.png"
                      alt="bLVMhF.png"
                ></a></p>
<p>但是呢，这里我自己又没有新闻，当然我可以自己定义一些新闻，构造成字典或者列表，或者去数据库，如果去数据库的话我们就得创建数据库表，然后使用一些查询数据库的语句；还有一种就是通过网络请求，也就是爬虫手段去爬取现成的的新闻数据；这里我们就使用爬虫的手段拿数据</p>
<p>我们先来看看这个联通新闻中心:</p>
<p>链接: <a class="link"   target="_blank" rel="noopener" href="http://www.chinaunicom.com.cn/news/list202203.html" >http://www.chinaunicom.com.cn/news/list202203.html<i class="fas fa-external-link-alt"></i></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLqKC8"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/14/bLqKC8.png"
                      alt="bLqKC8.png"
                ></a></p>
<p>不过这里我没成功抓到包，一直报502错误，我们就简单看看流程叭，在视频中是成功抓到包的，然后返回的是一个json数据</p>
<p>我们就在view.py中的new方法中向目标链接发起一个请求，这里我们要导入requests模块</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLOu6g"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/14/bLOu6g.png"
                      alt="bLOu6g.png"
                ></a></p>
<p>然后就可以在html代码中使用这些爬取到的的数据了</p>
<h3 id="请求和响应"><a href="#请求和响应" class="headerlink" title="请求和响应"></a>请求和响应</h3><p>之前我们已经安装了django，并且熟悉了相应的模板语法然后我们也写了个小案例，在小案例中已经可以集成一些数据进行展示了，但这些还不够，下面我们就来聊聊请求和响应</p>
<p>我们知道，我们的浏览器可以向服务器发送get请求和post请求，用来传递一些数据还有获取一些数据，那么接下来我们就来看看它是如何去传递数据以及传递数据之后咱们怎么来接收的</p>
<p>我们来写一个something的url:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLvb36"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/14/bLvb36.png"
                      alt="bLvb36.png"
                ></a><br>然后我们先来写一个视图函数的框架:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLvzEd"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/14/bLvzEd.png"
                      alt="bLvzEd.png"
                ></a></p>
<p>图片中也提到了，视图函数中的参数request是一个对象，里面封装了所有请求后返回过来的所有数据</p>
<p>request.method可以返回请求方式</p>
<p>request.GET可以返回在URL中的参数(GET请求传参方式)</p>
<p>request.POST可以返回请求体中的的参数(POST请求传参方式)</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bLzHOO"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/14/bLzHOO.png"
                      alt="bLzHOO.png"
                ></a></p>
<p>以上说的是请求，那么响应呢，自然是由return来返回，可以用<code>return HttpResponse</code>来返回一个字符串，也可以用<code>return render(request, &#39;example.html&#39;)</code>来返回一个页面，我们要注意刚刚所说的<code>print(request.GET)</code>或<code>print(request.POST)</code>再或者<code>print(request.method)</code>都不会展现在浏览器页面上的，就和上面图片中所展示的一样，是显示在控制台中的，而<code>return</code>出来的响应则会实实在在地显示出来，在<code>example.html</code>中，我们可以使用模板语言，项目在把这个响应给浏览器之前，就会进行渲染，渲染成一个完整的<code>html</code>文件</p>
<p>除了上述提到的<code>HttpResponse</code>和<code>render</code>两种方式的响应外，其实还可以返回一个<code>redirect</code>，相当于一个重定向，如下案例所示:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> redirect(<span class="string">&quot;https://www.baidu.com&quot;</span>)  <span class="comment"># 让浏览器重定向到其它页面</span></span><br></pre></td></tr></table></figure>

<p>然后当我们访问项目设置的地址后，就会跳转到百度的界面</p>
<p>那么是由django向浏览器发送请求，然后再把响应给浏览器的呢，还是直接由浏览器发送请求呢</p>
<p>那么答案是第二种，也就是不经过django，就是浏览器和相应的服务器一对一，浏览器发送请求，然后相应的服务器返回数据，是不经过我们正在访问的网站的</p>
<p>就好比我们访问联通的官网，然后里面有一个按钮跳转到百度，我们点击后，因为是在联通的官网点击的，但是联通的官网没有这个资源，资源那肯定在百度的服务器上，所以联通的服务器会告诉浏览器说，你去请求百度的服务器吧，然后浏览器就去访问百度的服务器了，这就叫重定向，百度这个网页的资源的传输是不经过联通官网的</p>
<p>以上我们就介绍了三个常见的请求和三个常见的响应，我们来总结下:</p>
<p>请求</p>
<ul>
<li>request.method</li>
<li>request.GET</li>
<li>request.POST</li>
</ul>
<p>响应</p>
<ul>
<li>HttpResponse(‘返回内容’)</li>
<li>render(request, ‘example.html’)</li>
<li>redirect(“<a class="link"   target="_blank" rel="noopener" href="http://www.baidu.com&quot;/" >www.baidu.com&quot;<i class="fas fa-external-link-alt"></i></a>)</li>
</ul>
<p>那么到这里，我们了解了这个之后，实际上我们现在就可以基于我们的django就可以写出一些页面，并且通过页面给咱们去传递一些数据，然后我们获取到数据之后，再给用户进行返回，这些事咱们其实就可以开始干了哈，那接下来我们就来搞上一个案例好叭</p>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>用户登录</p>
<p>我们上面所写的那些代码都是用于测试，咱们接下来每写一个案例，我们都会写一个新的函数，新的url，跟之前的是没有关系的，是分开的，我们现在做的这个用户登录，那还是在原来的基础上去做</p>
<p>上面那一段话其实可以不看，我们下面开始</p>
<p>首先我们写上一个url:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bj7OcF"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bj7OcF.png"
                      alt="bj7OcF.png"
                ></a></p>
<p>然后写上一个视图函数:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bjbnr4"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bjbnr4.png"
                      alt="bjbnr4.png"
                ></a></p>
<p>然后再写html文件:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bjbJxO"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bjbJxO.png"
                      alt="bjbJxO.png"
                ></a></p>
<p>我们指定了一个表单，为post提交方式，后面的action指定了提交方式</p>
<p>我们来梳理下流程，我们指定了url为<code>127.0.0.1:8000/login/</code>，我们访问这个地址就会触发视图函数，然后就会指向login.html，这个时候我们用户就看到了登录表单，然后我们输入了用户名和密码点击登录，由于action指定的提交地址是<code>/login/</code>，所以又会再走上面那个流程，所以我们要在视图函数中判断请求方式</p>
<p>如果是get请求，我们直接让用户看到登录页面</p>
<p>如果是其他请求，这其中就包含了post请求，我们就获取用户提交的数据，那么如何获取用户post提交的数据上面已经说过了，写上一个<code>request.POST</code>就可以获取了</p>
<p>所以我们来修改视图函数如下:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bjLsKS"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bjLsKS.png"
                      alt="bjLsKS.png"
                ></a></p>
<p>好，到目前为止，我们看起来已经做好了一切工作，我们来启动下项目看看效果</p>
<p>第一步，用户登录，好，没有问题:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220315112233898.png"
                      alt="image-20220315112233898"
                ></p>
<p>然后输入用户名秘密，点击提交</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bjOlIs"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bjOlIs.png"
                      alt="bjOlIs.png"
                ></a></p>
<p>哦吼，这个时候报了一个错: <code>CSRF token missing or incorrect</code></p>
<p>默认情况下，django比flask多一个CSRF token的验证，你可以认为这是多了一个安全机制的检验，如果你在django中想要解决这种问题怎么办呢，请注意，就是在你的form表单里面写上一个<code>&#123;% csrf_token %&#125;</code>，写上它就可以了</p>
<p>我们加上<code>&#123;% csrf_token %&#125;</code>，再来登录下试试</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bjXPyT"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bjXPyT.png"
                      alt="bjXPyT.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bjXQOO"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bjXQOO.png"
                      alt="bjXQOO.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bjXUpt"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bjXUpt.png"
                      alt="bjXUpt.png"
                ></a></p>
<p>从上图我们可以发现在<code>QueryDict</code>中除了我们输入的用户名和密码，还有一个<code>csrfmiddlewaretoken</code>，那这个是个啥啊，这其实就是django默认提供的一个机制，当我们查看浏览器源代码时，在其html文件form表单内部加了<code>&#123;% csrf_token %&#125;</code>的前提下，实际上就在内部帮你隐藏了一个input框:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bjj6bD"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bjj6bD.png"
                      alt="bjj6bD.png"
                ></a></p>
<p>然后你在提交的时候，除了你提交的这个值，还有django内部给你隐藏生成的这个值也会提交过去，所以刚刚我们会看到<code>csrfmiddlewaretoken</code>的值，这个隐藏的值我们不用管，django在内部回去读取它，用来校验这个请求是否是咱们正常请求过来的网页，如果是，它就默认会带着这个值，如果不是，那就会被认为是非法的请求，那也就不会有后续的操作了，当我们不带<code>&#123;% csrf_token %&#125;</code>这个值，源文件内部就不会有隐藏的<code>input</code>框，一点提交diango就会阻拦你的提交，认为你是一个非法的请求，就如上面的报错一样</p>
<p>接着刚刚的，我们已经拿到了post过来的数据了，也就是用户名和密码，那么不能什么都登录成功啊，那肯定得做个校验，我们可以用<code>request.POST.get(&#39;user&#39;)</code>拿到用户名，用<code>request.POST.get(&#39;pwd&#39;)</code>拿到密码，然后再根据用户名和密码是否正确来让用户是否登录成功</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bjxJk4"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bjxJk4.png"
                      alt="bjxJk4.png"
                ></a></p>
<p>这里我们就完成了对用户名和密码的校验，以此来让用户登录成功或者登录失败，但是这里有一点是不合理的，正常来说我们登录失败应该返回到登录页面，但是这里是直接显示了一个登录失败的字符串，这显然是不合理的，我们不应该以<code>return HttpResponse(&quot;登录失败&quot;)</code>来返回一个文本，应该是也返回登录页面，所以我们把视图函数修改如下:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bjzTr6"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bjzTr6.png"
                      alt="bjzTr6.png"
                ></a></p>
<p>以上的方法又有点欠缺，我们能不能在登录页面提示用户名和密码输入错了呢，这种做法就相比来说更人性化，不然每次数了用户名和密码错了，然后都得重定向，都得加载和渲染html，这个就从资源利用来说或者响应速度来说都是不够好的</p>
<p> 我们可以在view.py中对如果登录的信息不对进行一个提示，然后再在html代码中展现出来，如下图所示:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bv1FGd"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bv1FGd.png"
                      alt="bv1FGd.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bv1udS"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bv1udS.png"
                      alt="bv1udS.png"
                ></a></p>
<p>这种实现方式实际上就是根据模板语法去实现的</p>
<p>而这个写成这个还不是很方便，我们给它加上一个span标签，然后span标签再给它加上一个颜色，所以我们修改上面的login.html如下:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bv14Wd"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bv14Wd.png"
                      alt="bv14Wd.png"
                ></a></p>
<p>我们刷新下页面，然后输入一个错误的用户名和密码，就会出现红色的字体提示:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bv1zSs"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bv1zSs.png"
                      alt="bv1zSs.png"
                ></a></p>
<p>其实登录成功我们返回的是<code>登录成功</code>也不太好，正常来说应该是跳转到另一个页面，在这里我们可以使用<code>redirect</code>跳转到某个网址，比如我们就可以跳转到百度的首页，就以这个为例叭:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bv8Mgs"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bv8Mgs.png"
                      alt="bv8Mgs.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bv8fxA"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bv8fxA.png"
                      alt="bv8fxA.png"
                ></a></p>
<p>以上我们只是写了个简单的小案例，我们这里的用户名和密码是固定了的，项目中肯定不会这么用，我们肯定是要在数据库中去校验用户名和密码的，由于我们还没接触django操作数据库，我们就先写成这样，写成这样这纯纯的是一个初学者的代码，第一点，我们这里面的<code>if...else...</code>的嵌套有点多，我们可以把多余的else去除，修改后的代码如下:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvJn6s"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvJn6s.png"
                      alt="bvJn6s.png"
                ></a></p>
<h3 id="数据库的操作"><a href="#数据库的操作" class="headerlink" title="数据库的操作"></a>数据库的操作</h3><p>我们在Python中操作数据库是使用<code>pymysql</code></p>
<p>案例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接MySQL</span></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&#x27;1270.0.1&#x27;</span>, port=<span class="number">3306</span>, user=<span class="string">&#x27;root&#x27;</span>, password=<span class="string">&#x27;123456&#x27;</span>, charset=<span class="string">&#x27;utf-8&#x27;</span>, db=<span class="string">&#x27;student&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送指令</span></span><br><span class="line">cursor.execute(<span class="string">&#x27;insert into admin(username, password, mobile) values(&quot;lihoujian&quot;, &quot;123456&quot;, &quot;18796853411&quot;)&#x27;</span>)</span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<p>而django操作数据库更加简单，它在内部提供了一个ORM框架，在django中，我们不再需要去写SQL语句，ORM就相当于一个翻译工具，我们不再需要像之前使用<code>pymysql</code>模块的时候去写SQL语句，而取而代之的是<code>models.xxx.all()</code>之类的语句，ORM会把这个语句翻译成相应的SQL语句，然后底层再使用比如<code>pymysql</code>、<code>MySQLdb</code>、<code>mysqlclient</code>等模块去执行</p>
<p>这个ORM就是一个翻译的过程:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvUM2F"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvUM2F.png"
                      alt="bvUM2F.png"
                ></a></p>
<p>让我们开发者编写代码的时候更简洁，而不像以前自己还要再去写SQL语句；当然，有了ORM这个翻译工具，我们也要去学如何使用这个工具进行类数据库的增删改查</p>
<p>刚刚我们提到了ORM是依赖于一些库的，所以我们要先安装，这里我们需要安装第三方模块</p>
<h4 id="安装第三方模块"><a href="#安装第三方模块" class="headerlink" title="安装第三方模块"></a>安装第三方模块</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mysqlclient</span><br></pre></td></tr></table></figure>

<p>这里需要注意，如果是使用django以前的版本，比如django1或者django2，使用pymysql是完全没有问题的，但是到了django3，pymysql支持得不太好，在其内部有一个编码的错误，用pymysql就比较费劲；而django在最新的版本里面支持了mysqlclient，在这里我们底层就是用这个就可以的</p>
<h4 id="ORM能做啥子"><a href="#ORM能做啥子" class="headerlink" title="ORM能做啥子"></a>ORM能做啥子</h4><p>ORM可以帮助我们做两件事:</p>
<ul>
<li><p>创建、修改、删除数据库中的表(不用写SQL语句)，但是它无法创建数据库</p>
</li>
<li><p>操作表中的数据(不用写SQL语句)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into...</span><br><span class="line">update...</span><br><span class="line">selecet...<span class="keyword">from</span>...</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="创建数据库-自己创建"><a href="#创建数据库-自己创建" class="headerlink" title="创建数据库(自己创建)"></a>创建数据库(自己创建)</h4><p>前面也提到了，由于django不能创建数据库，所以我们得手动创建数据库，可以直接使用数据库的工具创建数据库，下面给个命令行的样例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database xxx DEFAULT CHARSET utf8 COLLATE utf8_general_ci;</span><br></pre></td></tr></table></figure>

<p><code>CHARSET</code>表示编码，<code>COLLATE</code>表示校对集，可以理解为排序规则</p>
<p>下面就和视频作者一起走一遍叭，哈哈哈哈哈:</p>
<ul>
<li>mysql -u root -p</li>
<li>输入密码</li>
<li>show databases;</li>
<li>然后把上面的代码贴进来即可</li>
</ul>
<p>视频中创建的是gx_day15，我也创建这个吧</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvDtIA"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvDtIA.png"
                      alt="bvDtIA.png"
                ></a></p>
<h4 id="Django连接数据库"><a href="#Django连接数据库" class="headerlink" title="Django连接数据库"></a>Django连接数据库</h4><p>在settings.py文件中进行配置和修改，找到DATABASES列表，默认用的是sqlite3数据库一个文件型数据库，我们不需要用这个，可以把目录中的<code>db.sqlite3</code>删除掉，然后settings.py中修改成如下即可:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置数据库</span></span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment"># python自带的一个数据库，基本不会被使用</span></span><br><span class="line">        <span class="comment"># &#x27;ENGINE&#x27;: &#x27;django.db.backends.sqlite3&#x27;,</span></span><br><span class="line">        <span class="comment"># &#x27;NAME&#x27;: os.path.join(BASE_DIR, &#x27;db.sqlite3&#x27;),</span></span><br><span class="line">        <span class="comment"># 注册我们自己使用的数据库连接</span></span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,  <span class="comment"># 数据库引擎</span></span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;gx_day15&#x27;</span>, <span class="comment">#数据库名称</span></span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>:<span class="string">&#x27;root&#x27;</span>, <span class="comment"># 连接数据库的用户名称</span></span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>:<span class="string">&#x27;123456&#x27;</span>,  <span class="comment"># 用户密码</span></span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>:<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="comment"># 访问的数据库的主机的ip地址</span></span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>:<span class="string">&#x27;3306&#x27;</span>, <span class="comment"># 默认mysql访问端口</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>django可以连接多种数据库，这里我们就看到了可以连接sqlite3、mysql、其实还有很多，可以看官网了解下</p>
<h4 id="Django操作表"><a href="#Django操作表" class="headerlink" title="Django操作表"></a>Django操作表</h4><h5 id="类创建表"><a href="#类创建表" class="headerlink" title="类创建表"></a>类创建表</h5><p>在models.py中操作</p>
<p>这里给上一个示例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">	name = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">	password = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line">	age = models.IntegerField()</span><br></pre></td></tr></table></figure>

<p>那么如果你写上面这么一个类，在django的底层，ORM会根据这个类帮助我们去生成并执行以下SQL语句:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table app名称_类名的小写(</span><br><span class="line">    name = varchar(<span class="number">32</span>),</span><br><span class="line">    password varchar(<span class="number">64</span>),</span><br><span class="line">    age <span class="built_in">int</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>由于我们在项目中的app名称为app_01，所以这底层执行的SQL语句为:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table app01_userinfo(</span><br><span class="line">    name = varchar(<span class="number">32</span>),</span><br><span class="line">    password varchar(<span class="number">64</span>),</span><br><span class="line">    age <span class="built_in">int</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>除了这上面的内容之外，其实还有一句也会自动生成，虽然在类中没有写，但是还是会自动生成:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span> bigint auto_increment primary key,</span><br></pre></td></tr></table></figure>

<p>所以以上所给出的类，django底层实际上生成的sql语句完整版为:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table app01_userinfo(</span><br><span class="line">    <span class="built_in">id</span> bigint auto_increment primary key,</span><br><span class="line">    name = varchar(<span class="number">32</span>),</span><br><span class="line">    password varchar(<span class="number">64</span>),</span><br><span class="line">    age <span class="built_in">int</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>生成以上SQL语句之后，django就会利用模块来生成数据库表了</p>
<p>类名就代指了数据库表表名，类里面的变量就代指了数据库表里的字段名</p>
<p>上面我们写了一个类，但这时候数据库中其实啥也没有呢，接下来我们还需要执行命令</p>
<p>打开terminal，执行两个命令:</p>
<p>注意: app已经注册，python已经安装mysqlclient，下面命令在项目根目录中执行</p>
<ul>
<li>```python<br>python manage.py makemigrations<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ ```python</span><br><span class="line">  python manage.py migrate</span><br></pre></td></tr></table></figure></li>
</ul>
<p>下面是我执行的样例:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bv2vh4"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bv2vh4.png"
                      alt="bv2vh4.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvRe9H"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvRe9H.png"
                      alt="bvRe9H.png"
                ></a></p>
<p>我们会发现它怎么给咱创建了这么多的表呢，这么多的表，它是办什么用的呢</p>
<p>实际上，在我们使用上面的两条命令时，django会去找每一个注册的app中的models.py，我们可以看见的，django默认打开一个项目是有好多app是已经注册了的，所以那些默认注册的app也有models.py，那肯定也会被创建表；那些默认的app也是有用的，会给我们提供一些功能，所以django在生成表的时候不仅把我们的app中的models.py给生成了表，默认的app也给生成表了；如果以后我们不想用其中某个功能，可以把它注释了</p>
<h5 id="类添加表"><a href="#类添加表" class="headerlink" title="类添加表"></a>类添加表</h5><p> 咱们刚一个类创建了一张表，那么我们可以再写多个类去创建多张表，比如就如下面所示:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Department</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">	title = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Role</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">	caption = models.CharField(max_length=<span class="number">16</span>)</span><br></pre></td></tr></table></figure>

<p>再次使用上面的两个命令，即可添加这两张表</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvfI9e"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvfI9e.png"
                      alt="bvfI9e.png"
                ></a></p>
<h5 id="类删除表"><a href="#类删除表" class="headerlink" title="类删除表"></a>类删除表</h5><p>如果我不想要其中哪个表了，就把相应的类去掉，再执行上面的两条命令即可删除表</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvhHGF"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvhHGF.png"
                      alt="bvhHGF.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvhWKs"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvhWKs.png"
                      alt="bvhWKs.png"
                ></a></p>
<h5 id="类修改表"><a href="#类修改表" class="headerlink" title="类修改表"></a>类修改表</h5><p>这里比如说<code>app01_userinfo</code>表中的age字段我不想要了，我想把这个字段给删除掉，那我们在相应的类中把相应的变量注释掉，同样再使用上面的两条命令即可</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bv5KTx"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bv5KTx.png"
                      alt="bv5KTx.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bv5YXd"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bv5YXd.png"
                      alt="bv5YXd.png"
                ></a></p>
<p>上面是删除一个字段，那如果我想在原有表的基础上新增一个字段呢，我们同样可以在原来的类中新增一个变量，然后使用上面提到的两条命令；但是这个时候我们要思考一个问题，如果，而且很有可能目标表是有数据的，那么我们新增的这个字段该填写什么数据呢？我们不妨先试试:</p>
<p>我打算在app01_userinfo表中新增size字段:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvIlbn"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvIlbn.png"
                      alt="bvIlbn.png"
                ></a></p>
<p>然后我使用两条命令:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvIt8U"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvIt8U.png"
                      alt="bvIt8U.png"
                ></a></p>
<p>可以看到，我在输入第一条命令后出现了提示，大致意思就是说我插入了新字段的值该怎么处理，是我们输入一个确定的值还是直接退出然后后续修改填入默认值，给了两个选项，选项1就是我们输入确定的值，选项2就是直接退出然后后续修改填入默认值</p>
<p>如果我们选择1，并且输入1，那该字段将全为1，如果我们选择2，那将直接退出，然后我们可以在指定变量的时候可以给定一个默认值，如下所示:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size = models.IntegerField(default=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>那么再执行两条命令就不会报错了，而且size字段的所有值都是2</p>
<p>要么就是允许该字段为空:</p>
<p>举个栗子说:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = models.IntegerField(null=<span class="literal">True</span>, blank=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>那么新增的data字段将全是空</p>
<p>所以我们在新增列的时候一定要注意</p>
<p>以后在开发中，如果想要对表结构进行调整，只需要在models.py操作类即可</p>
<h5 id="表的增删改查"><a href="#表的增删改查" class="headerlink" title="表的增删改查"></a>表的增删改查</h5><p>我们留下两个表来举栗子:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvHyeH"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvHyeH.png"
                      alt="bvHyeH.png"
                ></a></p>
<h5 id="增"><a href="#增" class="headerlink" title="增"></a>增</h5><p>给app01_department表新增数据，案例如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Department.objects.create(title=<span class="string">&#x27;销售部&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>以上代码就相当于SQL语句:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into app01_department(title) value(<span class="string">&#x27;销售部&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>给app01_useringo表新增数据，案例如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UserInfo.objects.create(name=<span class="string">&#x27;lihoujian&#x27;</span>, password=<span class="string">&#x27;123&#x27;</span>, age=<span class="number">99</span>)</span><br></pre></td></tr></table></figure>

<p>我们可以写个URL来测试下:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvj8OK"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvj8OK.png"
                      alt="bvj8OK.png"
                ></a></p>
<p>然后通过视图函数来新增数据:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvjD6P"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvjD6P.png"
                      alt="bvjD6P.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvj560"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvj560.png"
                      alt="bvj560.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvvQAg"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvvQAg.png"
                      alt="bvvQAg.png"
                ></a></p>
<h5 id="删"><a href="#删" class="headerlink" title="删"></a>删</h5><p>删除要使用<code>filter</code>函数:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvz0p9"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvz0p9.png"
                      alt="bvz0p9.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bvzZef"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bvzZef.png"
                      alt="bvzZef.png"
                ></a></p>
<p>如果是使用<code>UserInfo.objects.all().delete()</code>就是把这张表所有的数据都删除</p>
<h5 id="查"><a href="#查" class="headerlink" title="查"></a>查</h5><p>刚刚我们使用了<code>UserInfo.objects.all().delete()</code>方法来删除数据，我们同样可以用这个方法来获取数据</p>
<p><code>UserInfo.objects.all()</code>拿到的是一个Queryset，拿到的是表中的所有数据，Queryset类似于Python中的列表，然后我们自然可以遍历它:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bxpoo8"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bxpoo8.png"
                      alt="bxpoo8.png"
                ></a></p>
<p>刚刚同样使用了<code>objects.filter()</code>筛选然后删除，我们同样可以使用这个方法来获取数据，比如:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">models.UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=<span class="number">1</span>)  <span class="comment"># 拿到app01_userinfo表中的id为1的这一行数据，返回的也是Queryset</span></span><br></pre></td></tr></table></figure>

<p>这里要区别于<code>models.UserInfo.objects.filter(id=1).first()</code>，这个语句加上<code>.first</code>返回的就不是Queryset了，而是里面的对象，就相当于列表只有一个元素，然后把这个元素拿出来了</p>
<p>拿到对象我们就不用循环了，直接<code>.</code>就可以拿到里面的数据</p>
<h5 id="改"><a href="#改" class="headerlink" title="改"></a>改</h5><p>有了上面的基础，我们来看看如何更新数据:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">models.UserInfo.objects.<span class="built_in">all</span>().update(password=<span class="number">99</span>)  <span class="comment"># 把app01_userinfo表里面的password字段都修改为99</span></span><br></pre></td></tr></table></figure>

<p>如果你只想找到某一个或某一些，那就该加筛选条件了:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">models.UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=<span class="number">2</span>).update(password=<span class="number">99</span>)</span><br></pre></td></tr></table></figure>

<p>不只是id，还可以筛选name啥的:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">models.UserInfo.objects.<span class="built_in">filter</span>(name=lihoujian).update(password=<span class="number">99</span>)</span><br></pre></td></tr></table></figure>

<h3 id="案例-用户管理"><a href="#案例-用户管理" class="headerlink" title="案例-用户管理"></a>案例-用户管理</h3><h4 id="展示用户列表"><a href="#展示用户列表" class="headerlink" title="展示用户列表"></a>展示用户列表</h4><p>我们要写上一个URL，然后写上一个函数，在函数内，获取所有用户信息，把用户信息嵌套进HTML进行渲染再展现出来</p>
<p>URL:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bxiv3F"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bxiv3F.png"
                      alt="bxiv3F.png"
                ></a></p>
<p>视图函数:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bxFvIP"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bxFvIP.png"
                      alt="bxFvIP.png"
                ></a></p>
<p>info_list.html:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bxkPMQ"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bxkPMQ.png"
                      alt="bxkPMQ.png"
                ></a></p>
<p>效果:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bxAc7R"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/15/bxAc7R.png"
                      alt="bxAc7R.png"
                ></a></p>
<p>这里插一句，如果要改变date字段的显示格式，我们可以是使用以下代码:</p>
<p>这个时间(time)可以是数据写入的时间</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; item.time|date:<span class="string">&quot;Y-m-d H:i:s&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>更多的显示格式可以看武培齐的个人博客: <a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/wupeiqi/articles/5237704.html" >https://www.cnblogs.com/wupeiqi/articles/5237704.html<i class="fas fa-external-link-alt"></i></a></p>
<h4 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h4><p>上面的内容的数据都是从我们手动添加导数据库的，这里我们加一个添加用户的功能:</p>
<ul>
<li>准备一个URL</li>
<li>视图函数<ul>
<li>GET: 看到页面，输入内容</li>
<li>POST: 提交-&gt;写入到数据库</li>
</ul>
</li>
</ul>
<p>URL:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bzlHPg"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bzlHPg.png"
                      alt="bzlHPg.png"
                ></a></p>
<p>GET-&gt;页面:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bz10zj"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bz10zj.png"
                      alt="bz10zj.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bz1cwV"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bz1cwV.png"
                      alt="bz1cwV.png"
                ></a></p>
<p>这个时候我们注意了，如果post提交的地址和当前地址是一致的，这个action可以不写，所以上面的action是可以省略的</p>
<p>这个时候又要注意了，要加上<code>&#123;% csrf_token %&#125;</code>不然会提交不了</p>
<p>加上就能提交了，那么一点击数据就到了我们的后台，数据到了后台，我们应该就要读取它的用户名密码等数据了</p>
<p>POST-&gt;写入到数据库:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bz8iuR"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bz8iuR.png"
                      alt="bz8iuR.png"
                ></a></p>
<p>目前我们是只显示添加成功，我们还想直接跳转到INFO列表:</p>
<p>这里注意，如果是跳转到别人的网站那就得把域名啥的写清楚，但是我们自己的就不用写这么清楚了，因为它会自动帮你拼接当前的域名</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bzGFzQ"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bzGFzQ.png"
                      alt="bzGFzQ.png"
                ></a></p>
<p>要打开添加页面还要在地址栏输入地址才能打开添加的界面，这未免交互起来不太方便，一般来说在INFO列表有一个按钮，然后直接点击就能打开添加的界面，下面我们来实现下:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bzJYcQ"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bzJYcQ.png"
                      alt="bzJYcQ.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bzJaBn"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bzJaBn.png"
                      alt="bzJaBn.png"
                ></a></p>
<h4 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h4><ul>
<li>准备一个URL</li>
<li>视图函数</li>
</ul>
<p>那么如何来删除呢，我们肯定要传入一个参数，我们就以id来删除吧，下面给出一个示例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8000</span>/info/delete/?nid=<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>上面这个请求是get请求，我们就可以在视图函数中用<code>request.GET.get(&#39;nid&#39;)</code>来获取<code>nid</code>这个值，然后我们可以通过以下代码进行删除数据:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">models.UserInfo.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bzNcjg"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bzNcjg.png"
                      alt="bzNcjg.png"
                ></a></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bzN7gU"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bzN7gU.png"
                      alt="bzN7gU.png"
                ></a></p>
<p>还是和前面一样，我们可以实现点击一个按钮来删除:</p>
<p>修改info_list.html</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bzaff0"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bzaff0.png"
                      alt="bzaff0.png"
                ></a></p>
<p>实现试图函数:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bzax1K"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bzax1K.png"
                      alt="bzax1K.png"
                ></a></p>
<h3 id="案例概要-员工管理系统"><a href="#案例概要-员工管理系统" class="headerlink" title="案例概要(员工管理系统)"></a>案例概要(员工管理系统)</h3><p>主题: 员工管理系统</p>
<h4 id="创建项目和app"><a href="#创建项目和app" class="headerlink" title="创建项目和app"></a>创建项目和app</h4><p>如何创建项目和app这里不赘述，上面都有相关知识点，项目名称为<code>Staff_Management_System</code>，app名称我取名为: <code>staff</code></p>
<p>这里再提一下，如果是pycharm创建的项目，我们需要把自动生成的templates文件夹删除，然后在settings中对应的TEMPLATES列表也清空</p>
<p>如果是pycharm创建的项目，我们在创建app的时候不止可以在Terminal中敲命令，其实还有更方便地点击tools，然后点击run manage.py task，这个其实就是不用在敲manage.py了，pycharm这个编辑器自动帮你执行了manage.py，然后你就只需要输入startapp xxx即可，这个工具还有提示</p>
<p>创建好app之后就是注册app，这个之前也提到过，这里不再赘述</p>
<h4 id="表结构的创建"><a href="#表结构的创建" class="headerlink" title="表结构的创建"></a>表结构的创建</h4><p>在开始项目之前，我们要先来设计下这个系统的表结构，之前我们创建表，设计表结构都是通过sql语句，在django中我们就可以使用orm(对象关系映射)了，我们要去上面创建的stuff这个app下面的models.py中编写表结构</p>
<p>我们创建了两张表:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Department</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">	<span class="string">&quot;&quot;&quot;部门表&quot;&quot;&quot;</span></span><br><span class="line">	title = models.CharField(verbose_name=<span class="string">&#x27;标题&#x27;</span>, max_length=<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">	<span class="string">&quot;&quot;&quot;员工表&quot;&quot;&quot;</span></span><br><span class="line">	name = models.CharField(verbose_name=<span class="string">&#x27;姓名&#x27;</span>, max_length=<span class="number">16</span>)</span><br><span class="line">	password = models.CharField(verbose_name=<span class="string">&#x27;密码&#x27;</span>, max_length=<span class="number">64</span>)</span><br><span class="line">	age = models.IntegerField(verbose_name=<span class="string">&#x27;年龄&#x27;</span>)</span><br><span class="line">	account = models.DecimalField(verbose_name=<span class="string">&#x27;账户余额&#x27;</span>, max_digits=<span class="number">10</span>, decimal_places=<span class="number">2</span>, default=<span class="number">0</span>)</span><br><span class="line">	create_time = models.DateTimeField(verbose_name=<span class="string">&#x27;入职时间&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>我们来解读下上面创建表的语句:</p>
<ul>
<li>verbose_name = ‘标题’，就相当于对前面title的一个备注，一个解释</li>
<li>max_length = 32，规定了char类型的一个所能存储字节的个数，比如这里是最多存储32个字节</li>
<li>max_digits = 10，表示这个小数的最大长度是10位</li>
<li>decimal_places = 2，表示这个小数的小数位是2位</li>
<li>default = 0，表示如未填充数据，将默认为0</li>
</ul>
<p>目前我们就相当于创建了两个这种类型的表，用excel表示如下:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bzfg7q"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/bzfg7q.png"
                      alt="bzfg7q.png"
                ></a></p>
<p>到这里，我们有两个问题:</p>
<ul>
<li><p>那么如何把这两张彪串联起来呢，按理来说应该在第二张表在添加一个字段部门，那么是<strong>存储部门的名称比如销售还是存储部门名称对应的ID</strong>呢，其实这两者都有存储的，但是一般在开发中是存ID的，因为这样更符合数据库范式，常见开发都是这样的，如果存部门名称还需要更多空间，正常来说一个中国字所占字节在2~4个之间</p>
<p>但是一些大厂就不会按数据库范式来存，他会直接存名称，之所以会直接存名称，那很有可能这张表被查询的次数会非常非常多，一天可能好几千万次那种，如果存的是ID那就需要去联表，就是说如果想知道老奇幻(以上图为例)在哪个部门，还需要结合部门表才能得出结果，而联表操作就比较耗时，为了加速查找就会直接存名称</p>
<p>但是小公司一般没有这么大的数据访问量，所以一般还是存ID，所以确定了我们这里存部门ID</p>
</li>
<li><p><strong>部门ID需不需约束呢</strong>，就好比我们写下了这个语句:</p>
<ul>
<li><p>```python<br>class UserInfo(models.Model):</p>
<pre><code>&quot;&quot;&quot;员工表&quot;&quot;&quot;
name = models.CharField(verbose_name=&#39;姓名&#39;, max_length=16)
password = models.CharField(verbose_name=&#39;密码&#39;, max_length=64)
age = models.IntegerField(verbose_name=&#39;年龄&#39;)
account = models.DecimalField(verbose_name=&#39;账户余额&#39;, max_digits=10, decimal_places=2, default=0)
create_time = models.DateTimeField(verbose_name=&#39;入职时间&#39;)

depart_id = models.BigIntegerField(verbose_name = &#39;部门ID&#39;)
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">我们添加了最后这一句，这是没有加约束的，那也就意味着，这里depart_id也可以写10000，但是，在部门表中又没有对应的部门，那这样是不行的；那没有约束的话，这里的部门ID就可以写任何值，写进去完全是个垃圾值</span><br><span class="line"></span><br><span class="line">所以我们要给这个字段加上约束，这个depart_id只能是部门表中已存在的ID，如果写了部门表中不存在的ID，mysql会直接报错</span><br><span class="line"></span><br><span class="line">如果像上面这样写是不会加约束的，像下面这样写才是有约束的:</span><br><span class="line"></span><br><span class="line">比如说我们写上一个depart:</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">depart = models.ForeignKey(to=&quot;Department&quot;, to_field=&quot;id&quot;)</span><br></pre></td></tr></table></figure></li>
<li><p>to就表示要与哪张表关联</p>
</li>
<li><p>to_field就表示要与表中的哪个字段相关联</p>
</li>
<li><p>这里需要注意的一点是，虽然我们这里写的字段名是depart，但是django底层在生成表的的时候就会自动加一个<code>_id</code>，这也表示和部门表中id这个字段相关联叭</p>
</li>
</ul>
<p>除此之外，我们还需要考虑个问题，如果我们把一个部门删除了，那与之相关联的员工怎么办，他们原有的部门已经被删除了，下面有集中解决方法:</p>
<ul>
<li><p>删除用户，也就是级联删除，因为员工表与部门表是关联了的，所以当我们把某一个部门删除后，相对应的员工也会从员工表中删除，这个时候我们可以如下操作:</p>
<p><code>on_delete=models.CASCADE</code>就表示级联删除</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">depart = models.ForeignKey(to=<span class="string">&quot;Department&quot;</span>, to_field=<span class="string">&quot;id&quot;</span>, on_delete=models.CASCADE)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>那么还有一种就是置空，就是让它变成空值，前提是这一行要允许为空，这个时候我们可以这么如下操作:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">depart = models.Foreignkey(to=<span class="string">&quot;Department&quot;</span>, to_field=<span class="string">&quot;id&quot;</span>, null=<span class="literal">True</span>, blank=<span class="literal">True</span>,on_delete=models.SET_NULL)</span><br></pre></td></tr></table></figure>

<p>然后我还想在员工表中新增一个性别字段，我们本可以直接写男，或者女，但是这样感觉又会占空间，所以我们可以用如下方式实现:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gender_choices = (</span><br><span class="line">    (<span class="number">1</span>, <span class="string">&#x27;男&#x27;</span>)，</span><br><span class="line">    (<span class="number">2</span>, <span class="string">&#x27;女&#x27;</span>)</span><br><span class="line">)</span><br><span class="line">gender = models.SmallIntegerField(verbose_name=<span class="string">&#x27;性别&#x27;</span>, choices=gender_choices)</span><br></pre></td></tr></table></figure>

<p>上面我们用来<code>SmallIntegerField</code>来存储小数字，这个类型所占的字节数非常少，这里我们想用数字1和2分别代指男和女，但是1代表什么2代表什么我不知道啊，所以我们创建一个元组，然后使用<code>choices=&#39;gender_choices&#39;</code>来实现一个映射；这个就和数据库的约束无关了，这就属于在django中所做的约束了，以后写性别的时候只能写1或者2,1代表的是男，2代表的是女</p>
<h4 id="生成数据库表"><a href="#生成数据库表" class="headerlink" title="生成数据库表"></a>生成数据库表</h4><p>上面我们已经写了个模型类，下面我们就该在实际数据库中生成数据库表了</p>
<p>首先我们知道ORM(对象关系映射)是只能生成表的，不能生成数据库，所以我们首先要手动去生成数据库</p>
<p>如何生成数据库已经是老生常谈了，前面提到过，这里就不赘述了</p>
<p>如下所示我生成了一个gx_day16的数据库</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qSNQII"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/qSNQII.png"
                      alt="qSNQII.png"
                ></a></p>
<p> 然后第二步就是在django中修改配置文件，连接mysql:</p>
<p>我们直接修改之前的即可</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,  <span class="comment"># 数据库引擎</span></span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;gx_day16&#x27;</span>, <span class="comment">#数据库名称</span></span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>:<span class="string">&#x27;root&#x27;</span>, <span class="comment"># 连接数据库的用户名称</span></span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>:<span class="string">&#x27;123456&#x27;</span>,  <span class="comment"># 用户密码</span></span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>:<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="comment"># 访问的数据库的主机的ip地址</span></span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>:<span class="string">&#x27;3306&#x27;</span>, <span class="comment"># 默认mysql访问端口</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那接下来就是我们需要使用命令在数据库中生成相应的表，还是那两个熟悉的命令</p>
<p>这样写上之后，表结构就在数据库中被创建了:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qSaorD"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/qSaorD.png"
                      alt="qSaorD.png"
                ></a></p>
<p>后续我们就能开始写页面了，对数据库中的表进行增删改查</p>
<h4 id="静态文件管理"><a href="#静态文件管理" class="headerlink" title="静态文件管理"></a>静态文件管理</h4><p>我们需要在stuff这个目录下创建一个static文件，用于放静态文件，由于之前我们已有这些静态文件里，所以呢，我们就直接拷贝之前的过来即可，后续使用到其他的静态文件可以再引入</p>
<p>然后我们再创建一个模板文件templates，也是直接在stuff这个app下创建</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qSwpSx"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/qSwpSx.png"
                      alt="qSwpSx.png"
                ></a></p>
<h4 id="部门管理"><a href="#部门管理" class="headerlink" title="部门管理"></a>部门管理</h4><p>这里我们先用最原始的方法来做，其实Django中提供了Form和ModelForm组件，如果用这个实现起来会更方便，现在我们先用最原始的方式来做:</p>
<h5 id="部门列表展示"><a href="#部门列表展示" class="headerlink" title="部门列表展示"></a>部门列表展示</h5><p>我们自己给自己当UI，先来画一下大概想要实现的样子:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qSwq3t"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/qSwq3t.png"
                      alt="qSwq3t.png"
                ></a><br>下面就先把简单的页面做出来</p>
<p>URL:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;depart/list/&#x27;</span>, views.depart_list)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qS0Q81"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/qS0Q81.png"
                      alt="qS0Q81.png"
                ></a></p>
<p>views.py:</p>
<p>到目前我们还未用到数据库</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qpSDSg"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/qpSDSg.png"
                      alt="qpSDSg.png"
                ></a></p>
<p>depart_list.html:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap-3.4.1/css/bootstrap.min.css&#x27;%&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--下面的样式用于去掉导航栏的圆角--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.navbar</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">border-radius</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-default&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-1&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span> 联通用户管理系统 <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Collect the nav links, forms, and other content for toggling --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          修改下面两个li标签，第一个改为部门管理，第二个改为用户管理--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/depart/list&quot;</span>&gt;</span>部门管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          下拉菜单删除--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--        &lt;li class=&quot;dropdown&quot;&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          &lt;a href=&quot;#&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; role=&quot;button&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt;Dropdown &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/a&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          &lt;ul class=&quot;dropdown-menu&quot;&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;One more separated link&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          &lt;/ul&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--        &lt;/li&gt;--&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--        输入框删除--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--      &lt;form class=&quot;navbar-form navbar-left&quot;&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--        &lt;div class=&quot;form-group&quot;&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--          &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Search&quot;&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--        &lt;/div&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--        &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Submit&lt;/button&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--      &lt;/form&gt;--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          修改下面这个li标签，成为登录按钮， 这里先做部分修改--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          下面这个下拉框，我们可以用于登录后显示用户信息，这里先做个修改案例--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>lihoujian<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>个人资料<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>我的信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>我的爱好<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>注销<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.navbar-collapse --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.container-fluid --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        新建部门按钮--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        margin-bottom: 10px让新建按钮和下面的表格有个间距--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 10px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                新加了一个新建部门的图标，这个也是直接从bootstrap的网页中扣取下来的--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-plus&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                新建部门</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        表格用面板展现出来, 这里是直接扣的bootstrap示例的网页源代码--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Default panel contents --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--                新加了一个部门图标--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-th-list&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                部门列表</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- Table --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--            table-bordered给表格加上一个边框--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>销售部<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                        btn-xs使得图标显示得小一些--&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-xs&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-xs&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/jQuery-3.6.1.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap-3.4.1.js/bootstrap.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面就是对部门列表的一些展示，如果觉得这个导航栏平铺着比较难看，我们可以在代码中把<code>&lt;div class=&quot;container-fluid&quot;&gt;</code>改为<code>&lt;div class=&quot;container</code>他就会设置一个宽度，并且让内容居中，代码中我也写了一些注释</p>
<p>暂时的效果如下:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qSzBrR"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/qSzBrR.png"
                      alt="qSzBrR.png"
                ></a></p>
<h5 id="部门列表展示-续之使用上数据库"><a href="#部门列表展示-续之使用上数据库" class="headerlink" title="部门列表展示(续之使用上数据库)"></a>部门列表展示(续之使用上数据库)</h5><p>我们需要从数据库中把数据读出来，但是目前数据库中还没有数据，所以我现在手动地往里面加几个数据</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qppODs"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/qppODs.png"
                      alt="qppODs.png"
                ></a></p>
<p>当我添加这两行数据后，我就要将它们在页面中给我展现出来</p>
<p>我们来修改views.py:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qpCiJf"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/qpCiJf.png"
                      alt="qpCiJf.png"
                ></a></p>
<p>然后我们自然是要修改表格了，嵌入一个循环来读取数据:</p>
<p>这里附上代码片段</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;table <span class="class"><span class="keyword">class</span>=&quot;<span class="title">table</span> <span class="title">table</span>-<span class="title">bordered</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">thead</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">th</span>&gt;<span class="title">ID</span>&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">th</span>&gt;名称&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">th</span>&gt;操作&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">thead</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">tbody</span>&gt;</span></span><br><span class="line"><span class="class">                &#123;% <span class="title">for</span> <span class="title">obj</span> <span class="title">in</span> <span class="title">queryset</span> %&#125;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">th</span> <span class="title">scope</span>=&quot;<span class="title">row</span>&quot;&gt;&#123;&#123; <span class="title">obj</span>.<span class="title">id</span> &#125;&#125;&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">td</span>&gt;&#123;&#123; <span class="title">obj</span>.<span class="title">title</span> &#125;&#125;&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">&lt;!--                        <span class="title">btn</span>-<span class="title">xs</span>使得图标显示得小一些--&gt;</span></span><br><span class="line"><span class="class">                        &lt;a href=&quot;&quot; <span class="keyword">class</span>=&quot;btn btn-primary btn-xs&quot;&gt;新增&lt;/a&gt;</span></span><br><span class="line"><span class="class">                        &lt;a href=&quot;&quot; <span class="keyword">class</span>=&quot;btn btn-danger btn-xs&quot;&gt;删除&lt;/a&gt;</span></span><br><span class="line"><span class="class">                    &lt;/td&gt;</span></span><br><span class="line"><span class="class">                &lt;/tr&gt;</span></span><br><span class="line"><span class="class">                &#123;% endfor %&#125;</span></span><br><span class="line"><span class="class">                &lt;/tbody&gt;</span></span><br><span class="line"><span class="class">            &lt;/table&gt;</span></span><br></pre></td></tr></table></figure>

<p>实现效果:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qpCtm9"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/16/qpCtm9.png"
                      alt="qpCtm9.png"
                ></a></p>
<h5 id="添加部门"><a href="#添加部门" class="headerlink" title="添加部门"></a>添加部门</h5><p>刚才我们已经完成了展示部门列表</p>
<p>下面我们来完成添加功能的部分内容，完成添加页面的前端部分</p>
<p>在部门列表展示中有一个新建部门的按钮，点击它，应该会跳转到一个页面 ，我们就是要完成这个页面的部分，和URL的部分</p>
<p>首先我们要修改<code>depart/list</code>中的新建部门按钮所跳转的链接:</p>
<p>下面给上代码片段:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;/depart/add/&quot;</span> <span class="class"><span class="keyword">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">success</span>&quot; <span class="title">target</span>=&quot;<span class="title">_blank</span>&quot;&gt;</span></span><br><span class="line"><span class="class">&lt;!--                新加了一个新建部门的图标，这个也是直接从<span class="title">bootstrap</span>的网页中扣取下来的--&gt;</span></span><br><span class="line"><span class="class">                &lt;span <span class="keyword">class</span>=&quot;glyphicon glyphicon-plus&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="class">                新建部门</span></span><br><span class="line"><span class="class">            &lt;/a&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>target=&quot;_blank&quot;</code>就表示在新页面中打开，我们这里就不在新页面中打开了</p>
<p>那自然还要配置URL和视图:</p>
<p>然后就是<code>depart_add.html</code>了:</p>
<p>导航栏什么的肯定是原封不动从<code>depart_list.html</code>中拿过来了，然后我们也可以给他加上一个面板</p>
<p>下面直接上代码吧，代码中我也嵌入了注释</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;添加部门&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap-3.4.1/css/bootstrap.min.css&#x27;%&#125;&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!--下面的样式用于去掉导航栏的圆角--&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .navbar&#123;</span><br><span class="line">        border-radius: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;nav <span class="class"><span class="keyword">class</span>=&quot;<span class="title">navbar</span> <span class="title">navbar</span>-<span class="title">default</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">container</span>-<span class="title">fluid</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;!-- <span class="title">Brand</span> <span class="title">and</span> <span class="title">toggle</span> <span class="title">get</span> <span class="title">grouped</span> <span class="title">for</span> <span class="title">better</span> <span class="title">mobile</span> <span class="title">display</span> --&gt;</span></span><br><span class="line"><span class="class">        &lt;div <span class="keyword">class</span>=&quot;navbar-header&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;button <span class="built_in">type</span>=&quot;button&quot; <span class="keyword">class</span>=&quot;navbar-toggle collapsed&quot; data-toggle=&quot;collapse&quot;</span></span><br><span class="line"><span class="class">                    data-target=&quot;#bs-example-navbar-collapse-1&quot; aria-expanded=&quot;false&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;span <span class="keyword">class</span>=&quot;sr-only&quot;&gt;Toggle navigation&lt;/span&gt;</span></span><br><span class="line"><span class="class">                &lt;span <span class="keyword">class</span>=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="class">                &lt;span <span class="keyword">class</span>=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="class">                &lt;span <span class="keyword">class</span>=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="class">            &lt;/button&gt;</span></span><br><span class="line"><span class="class">            &lt;a <span class="keyword">class</span>=&quot;navbar-brand&quot; href=&quot;#&quot;&gt; 联通用户管理系统 &lt;/a&gt;</span></span><br><span class="line"><span class="class">        &lt;/div&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">        &lt;!-- Collect the nav links, forms, <span class="keyword">and</span> other content <span class="keyword">for</span> toggling --&gt;</span></span><br><span class="line"><span class="class">        &lt;div <span class="keyword">class</span>=&quot;collapse navbar-collapse&quot; <span class="built_in">id</span>=&quot;bs-example-navbar-collapse-1&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;ul <span class="keyword">class</span>=&quot;nav navbar-nav&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          修改下面两个li标签，第一个改为部门管理，第二个改为用户管理--&gt;</span></span><br><span class="line"><span class="class">                &lt;li&gt;&lt;a href=&quot;/depart/<span class="built_in">list</span>&quot;&gt;部门管理&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;用户管理&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          下拉菜单删除--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--        &lt;li <span class="keyword">class</span>=&quot;dropdown&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          &lt;a href=&quot;#&quot; <span class="keyword">class</span>=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; role=&quot;button&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt;Dropdown &lt;span <span class="keyword">class</span>=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/a&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          &lt;ul <span class="keyword">class</span>=&quot;dropdown-menu&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something <span class="keyword">else</span> here&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li role=&quot;separator&quot; <span class="keyword">class</span>=&quot;divider&quot;&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li role=&quot;separator&quot; <span class="keyword">class</span>=&quot;divider&quot;&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;One more separated link&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          &lt;/ul&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--        &lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;/ul&gt;</span></span><br><span class="line"><span class="class">            &lt;!--        输入框删除--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--      &lt;form <span class="keyword">class</span>=&quot;navbar-form navbar-left&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--        &lt;div <span class="keyword">class</span>=&quot;form-group&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--          &lt;<span class="built_in">input</span> <span class="built_in">type</span>=&quot;text&quot; <span class="keyword">class</span>=&quot;form-control&quot; placeholder=&quot;Search&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--        &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--        &lt;button <span class="built_in">type</span>=&quot;submit&quot; <span class="keyword">class</span>=&quot;btn btn-default&quot;&gt;Submit&lt;/button&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--      &lt;/form&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;ul <span class="keyword">class</span>=&quot;nav navbar-nav navbar-right&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          修改下面这个li标签，成为登录按钮， 这里先做部分修改--&gt;</span></span><br><span class="line"><span class="class">                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;登录&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          下面这个下拉框，我们可以用于登录后显示用户信息，这里先做个修改案例--&gt;</span></span><br><span class="line"><span class="class">                &lt;li <span class="keyword">class</span>=&quot;dropdown&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;a href=&quot;#&quot; <span class="keyword">class</span>=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; role=&quot;button&quot; aria-haspopup=&quot;true&quot;</span></span><br><span class="line"><span class="class">                       aria-expanded=&quot;false&quot;&gt;lihoujian&lt;span <span class="keyword">class</span>=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="class">                    &lt;ul <span class="keyword">class</span>=&quot;dropdown-menu&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;li&gt;&lt;a href=&quot;#&quot;&gt;个人资料&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                        &lt;li&gt;&lt;a href=&quot;#&quot;&gt;我的信息&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                        &lt;li&gt;&lt;a href=&quot;#&quot;&gt;我的爱好&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                        &lt;li role=&quot;separator&quot; <span class="keyword">class</span>=&quot;divider&quot;&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                        &lt;li&gt;&lt;a href=&quot;#&quot;&gt;注销&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                    &lt;/ul&gt;</span></span><br><span class="line"><span class="class">                &lt;/li&gt;</span></span><br><span class="line"><span class="class">            &lt;/ul&gt;</span></span><br><span class="line"><span class="class">        &lt;/div&gt;&lt;!-- /.navbar-collapse --&gt;</span></span><br><span class="line"><span class="class">    &lt;/div&gt;&lt;!-- /.container-fluid --&gt;</span></span><br><span class="line"><span class="class">&lt;/nav&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;div&gt;</span></span><br><span class="line"><span class="class">    &lt;div <span class="keyword">class</span>=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;!--        加入面板--&gt;</span></span><br><span class="line"><span class="class">        &lt;div <span class="keyword">class</span>=&quot;panel panel-default&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;div <span class="keyword">class</span>=&quot;panel-heading&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;h3 <span class="keyword">class</span>=&quot;panel-title&quot;&gt;新建部门&lt;/h3&gt;</span></span><br><span class="line"><span class="class">            &lt;/div&gt;</span></span><br><span class="line"><span class="class">            &lt;div <span class="keyword">class</span>=&quot;panel-body&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                面板的内容我们写表单--&gt;</span></span><br><span class="line"><span class="class">                &lt;form method=&quot;post&quot;&gt;</span></span><br><span class="line"><span class="class">                    &#123;% csrf_token %&#125;</span></span><br><span class="line"><span class="class">                    &lt;div <span class="keyword">class</span>=&quot;form-group&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;label&gt;标题&lt;/label&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="built_in">input</span> <span class="built_in">type</span>=&quot;text&quot; <span class="keyword">class</span>=&quot;form-control&quot; placeholder=&quot;标题&quot; name=&quot;title&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;/div&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                    &lt;div <span class="keyword">class</span>=&quot;form-group&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                        &lt;label <span class="keyword">class</span>=&quot;col-sm-2 co ntrol-label&quot;&gt;保存&lt;/label&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                        &lt;div <span class="keyword">class</span>=&quot;col-sm-10&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                            &lt;<span class="built_in">input</span> <span class="built_in">type</span>=&quot;password&quot; <span class="keyword">class</span>=&quot;form-control&quot; <span class="built_in">id</span>=&quot;inputPassword3&quot; placeholder=&quot;Password&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                        &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                    &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                    &lt;div <span class="keyword">class</span>=&quot;form-group&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                        &lt;div <span class="keyword">class</span>=&quot;col-sm-offset-2 col-sm-10&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                            &lt;div <span class="keyword">class</span>=&quot;checkbox&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                                &lt;label&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                                    &lt;<span class="built_in">input</span> <span class="built_in">type</span>=&quot;checkbox&quot;&gt; Remember me--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                                &lt;/label&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                            &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                        &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                    &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;button <span class="built_in">type</span>=&quot;submit&quot; <span class="keyword">class</span>=&quot;btn btn-primary&quot;&gt;提交&lt;/button&gt;</span></span><br><span class="line"><span class="class">                &lt;/form&gt;</span></span><br><span class="line"><span class="class">            &lt;/div&gt;</span></span><br><span class="line"><span class="class">        &lt;/div&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;/div&gt;</span></span><br><span class="line"><span class="class">&lt;/div&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;script src=&quot;&#123;% static &#x27;js/jQuery-3.6.1.<span class="built_in">min</span>.js&#x27; %&#125;&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="class">&lt;script src=&quot;&#123;% static &#x27;plugins/bootstrap-3.4.1.js/bootstrap.<span class="built_in">min</span>.js&#x27; %&#125;&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="class">&lt;/body&gt;</span></span><br><span class="line"><span class="class">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<p>视图:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">depart_add</span>(<span class="params">request</span>):</span></span><br><span class="line">	<span class="string">&quot;&quot;&quot;添加部门&quot;&quot;&quot;</span></span><br><span class="line">	<span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">		<span class="keyword">return</span> render(request, <span class="string">&#x27;depart_add.html&#x27;</span>)</span><br><span class="line">	<span class="comment"># 获取用户post提交过来的数据,如果title为空呢，后面我们会有一个组件来判断，这里先默认用户输入的这个标题都是合法的</span></span><br><span class="line">	depart_name = request.POST.get(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">	<span class="comment"># 保存到数据库</span></span><br><span class="line">	models.Department.objects.create(title=depart_name)</span><br><span class="line">	<span class="keyword">return</span> redirect(<span class="string">&#x27;/depart/list/&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h5 id="删除部门"><a href="#删除部门" class="headerlink" title="删除部门"></a>删除部门</h5><p>URL:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qCnuzd"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/17/qCnuzd.png"
                      alt="qCnuzd.png"
                ></a></p>
<p>views.py:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qCn3eP"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/17/qCn3eP.png"
                      alt="qCn3eP.png"
                ></a></p>
<p>我们在<code>depart_list.html</code>中做修改:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                &#123;% for obj in queryset %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.title &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                        btn-xs使得图标显示得小一些--&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/depart/add/&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-xs&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/depart/delete/?nid=&#123;&#123; obj.id &#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-xs&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                &#123;% endfor %&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>到这里我们删除部门的功能就实现了</p>
<h5 id="编辑部门"><a href="#编辑部门" class="headerlink" title="编辑部门"></a>编辑部门</h5><p>我们点击编辑就会跳转到一个界面</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qCuh9g"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/17/qCuh9g.png"
                      alt="qCuh9g.png"
                ></a></p>
<p>首先我们需要大概测绘出长什么样子</p>
<p>它应该长得和我们新建部门差不多叭，然后会显示一个默认值，我们在默认值的基础上进行修改</p>
<p>首先还是老样子，我们先写URL:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qCKfVx"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/17/qCKfVx.png"
                      alt="qCKfVx.png"
                ></a></p>
<p>然后我们用之前<code>depart_add.html</code>做一些修改然后保存为<code>depart_edit.html</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;添加部门&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap-3.4.1/css/bootstrap.min.css&#x27;%&#125;&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!--下面的样式用于去掉导航栏的圆角--&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .navbar&#123;</span><br><span class="line">        border-radius: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;nav <span class="class"><span class="keyword">class</span>=&quot;<span class="title">navbar</span> <span class="title">navbar</span>-<span class="title">default</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">container</span>-<span class="title">fluid</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;!-- <span class="title">Brand</span> <span class="title">and</span> <span class="title">toggle</span> <span class="title">get</span> <span class="title">grouped</span> <span class="title">for</span> <span class="title">better</span> <span class="title">mobile</span> <span class="title">display</span> --&gt;</span></span><br><span class="line"><span class="class">        &lt;div <span class="keyword">class</span>=&quot;navbar-header&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;button <span class="built_in">type</span>=&quot;button&quot; <span class="keyword">class</span>=&quot;navbar-toggle collapsed&quot; data-toggle=&quot;collapse&quot;</span></span><br><span class="line"><span class="class">                    data-target=&quot;#bs-example-navbar-collapse-1&quot; aria-expanded=&quot;false&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;span <span class="keyword">class</span>=&quot;sr-only&quot;&gt;Toggle navigation&lt;/span&gt;</span></span><br><span class="line"><span class="class">                &lt;span <span class="keyword">class</span>=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="class">                &lt;span <span class="keyword">class</span>=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="class">                &lt;span <span class="keyword">class</span>=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="class">            &lt;/button&gt;</span></span><br><span class="line"><span class="class">            &lt;a <span class="keyword">class</span>=&quot;navbar-brand&quot; href=&quot;#&quot;&gt; 联通用户管理系统 &lt;/a&gt;</span></span><br><span class="line"><span class="class">        &lt;/div&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">        &lt;!-- Collect the nav links, forms, <span class="keyword">and</span> other content <span class="keyword">for</span> toggling --&gt;</span></span><br><span class="line"><span class="class">        &lt;div <span class="keyword">class</span>=&quot;collapse navbar-collapse&quot; <span class="built_in">id</span>=&quot;bs-example-navbar-collapse-1&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;ul <span class="keyword">class</span>=&quot;nav navbar-nav&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          修改下面两个li标签，第一个改为部门管理，第二个改为用户管理--&gt;</span></span><br><span class="line"><span class="class">                &lt;li&gt;&lt;a href=&quot;/depart/<span class="built_in">list</span>&quot;&gt;部门管理&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;用户管理&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          下拉菜单删除--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--        &lt;li <span class="keyword">class</span>=&quot;dropdown&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          &lt;a href=&quot;#&quot; <span class="keyword">class</span>=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; role=&quot;button&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt;Dropdown &lt;span <span class="keyword">class</span>=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/a&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          &lt;ul <span class="keyword">class</span>=&quot;dropdown-menu&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something <span class="keyword">else</span> here&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li role=&quot;separator&quot; <span class="keyword">class</span>=&quot;divider&quot;&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li role=&quot;separator&quot; <span class="keyword">class</span>=&quot;divider&quot;&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;One more separated link&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          &lt;/ul&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--        &lt;/li&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;/ul&gt;</span></span><br><span class="line"><span class="class">            &lt;!--        输入框删除--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--      &lt;form <span class="keyword">class</span>=&quot;navbar-form navbar-left&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--        &lt;div <span class="keyword">class</span>=&quot;form-group&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--          &lt;<span class="built_in">input</span> <span class="built_in">type</span>=&quot;text&quot; <span class="keyword">class</span>=&quot;form-control&quot; placeholder=&quot;Search&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--        &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--        &lt;button <span class="built_in">type</span>=&quot;submit&quot; <span class="keyword">class</span>=&quot;btn btn-default&quot;&gt;Submit&lt;/button&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;!--      &lt;/form&gt;--&gt;</span></span><br><span class="line"><span class="class">            &lt;ul <span class="keyword">class</span>=&quot;nav navbar-nav navbar-right&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          修改下面这个li标签，成为登录按钮， 这里先做部分修改--&gt;</span></span><br><span class="line"><span class="class">                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;登录&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                &lt;!--          下面这个下拉框，我们可以用于登录后显示用户信息，这里先做个修改案例--&gt;</span></span><br><span class="line"><span class="class">                &lt;li <span class="keyword">class</span>=&quot;dropdown&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;a href=&quot;#&quot; <span class="keyword">class</span>=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; role=&quot;button&quot; aria-haspopup=&quot;true&quot;</span></span><br><span class="line"><span class="class">                       aria-expanded=&quot;false&quot;&gt;lihoujian&lt;span <span class="keyword">class</span>=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="class">                    &lt;ul <span class="keyword">class</span>=&quot;dropdown-menu&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;li&gt;&lt;a href=&quot;#&quot;&gt;个人资料&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                        &lt;li&gt;&lt;a href=&quot;#&quot;&gt;我的信息&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                        &lt;li&gt;&lt;a href=&quot;#&quot;&gt;我的爱好&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                        &lt;li role=&quot;separator&quot; <span class="keyword">class</span>=&quot;divider&quot;&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                        &lt;li&gt;&lt;a href=&quot;#&quot;&gt;注销&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="class">                    &lt;/ul&gt;</span></span><br><span class="line"><span class="class">                &lt;/li&gt;</span></span><br><span class="line"><span class="class">            &lt;/ul&gt;</span></span><br><span class="line"><span class="class">        &lt;/div&gt;&lt;!-- /.navbar-collapse --&gt;</span></span><br><span class="line"><span class="class">    &lt;/div&gt;&lt;!-- /.container-fluid --&gt;</span></span><br><span class="line"><span class="class">&lt;/nav&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;div&gt;</span></span><br><span class="line"><span class="class">    &lt;div <span class="keyword">class</span>=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;!--        加入面板--&gt;</span></span><br><span class="line"><span class="class">        &lt;div <span class="keyword">class</span>=&quot;panel panel-default&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;div <span class="keyword">class</span>=&quot;panel-heading&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;h3 <span class="keyword">class</span>=&quot;panel-title&quot;&gt;编辑部门&lt;/h3&gt;</span></span><br><span class="line"><span class="class">            &lt;/div&gt;</span></span><br><span class="line"><span class="class">            &lt;div <span class="keyword">class</span>=&quot;panel-body&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                面板的内容我们写表单--&gt;</span></span><br><span class="line"><span class="class">                &lt;form method=&quot;post&quot;&gt;</span></span><br><span class="line"><span class="class">                    &#123;% csrf_token %&#125;</span></span><br><span class="line"><span class="class">                    &lt;div <span class="keyword">class</span>=&quot;form-group&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;label&gt;标题&lt;/label&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="built_in">input</span> <span class="built_in">type</span>=&quot;text&quot; <span class="keyword">class</span>=&quot;form-control&quot; placeholder=&quot;标题&quot; name=&quot;title&quot; value=&quot;&#123;&#123; row_object.title &#125;&#125;&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;/div&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                    &lt;div <span class="keyword">class</span>=&quot;form-group&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                        &lt;label <span class="keyword">class</span>=&quot;col-sm-2 co ntrol-label&quot;&gt;保存&lt;/label&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                        &lt;div <span class="keyword">class</span>=&quot;col-sm-10&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                            &lt;<span class="built_in">input</span> <span class="built_in">type</span>=&quot;password&quot; <span class="keyword">class</span>=&quot;form-control&quot; <span class="built_in">id</span>=&quot;inputPassword3&quot; placeholder=&quot;Password&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                        &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                    &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                    &lt;div <span class="keyword">class</span>=&quot;form-group&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                        &lt;div <span class="keyword">class</span>=&quot;col-sm-offset-2 col-sm-10&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                            &lt;div <span class="keyword">class</span>=&quot;checkbox&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                                &lt;label&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                                    &lt;<span class="built_in">input</span> <span class="built_in">type</span>=&quot;checkbox&quot;&gt; Remember me--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                                &lt;/label&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                            &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                        &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--                    &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;button <span class="built_in">type</span>=&quot;submit&quot; <span class="keyword">class</span>=&quot;btn btn-primary&quot;&gt;提交&lt;/button&gt;</span></span><br><span class="line"><span class="class">                &lt;/form&gt;</span></span><br><span class="line"><span class="class">            &lt;/div&gt;</span></span><br><span class="line"><span class="class">        &lt;/div&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;/div&gt;</span></span><br><span class="line"><span class="class">&lt;/div&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;script src=&quot;&#123;% static &#x27;js/jQuery-3.6.1.<span class="built_in">min</span>.js&#x27; %&#125;&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="class">&lt;script src=&quot;&#123;% static &#x27;plugins/bootstrap-3.4.1.js/bootstrap.<span class="built_in">min</span>.js&#x27; %&#125;&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="class">&lt;/body&gt;</span></span><br><span class="line"><span class="class">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<p>比如这个面板的标题应该叫编辑部门或者修改部门，然我们刚也提到了就是我们修改哪一个部门然后在修改界面也应该显示这个部门名称，那么我们就可以这么实现，当我们点击编辑的时候，就把这个数据的id也携带过去，然后我们在编辑页面就可以针对这个id在数据库里面进行寻找，找到这个id的数据自然也就能获取到名称了，刚刚我们删除部门的时候就使用过一种方法，就是直接在url中携带一个uid；但是这里基于django啊，我们还可以做上一个更加方便的传值的一个功能，我们可以直接修改URL，在URL中嵌入正则表达式，比如<code>path(&#39;depart/&lt;int:nid&gt;/edit/&#39;)</code>那么我们以后填写URL的时候就必须填入类似<code>http://127.0.0.1:8000/depart/1/edit/</code>这样的URL，如果这样传了，我们在视图函数中加个参数nid，这个参数就是你通过这个URL传递过来的这个真实的id，然后在视图函数中就可以拿到这个id来进行数据库查找的操作了:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">depart_edit</span>(<span class="params">request, nid</span>):</span></span><br><span class="line">	<span class="string">&quot;&quot;&quot;修改部门&quot;&quot;&quot;</span></span><br><span class="line">	<span class="comment"># 根据nid,获取它的数据</span></span><br><span class="line">	row_object = models.Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">	<span class="keyword">return</span> render(request, <span class="string">&#x27;depart_edit.html&#x27;</span>, &#123;<span class="string">&#x27;row_object&#x27;</span>: row_object&#125;)</span><br></pre></td></tr></table></figure>

<p>然后下一步就是点击提交了，这个时候就是post请求了，我们需要在views.py中拿到该数据的id，然后针对这个id对该数据进行修改，id就携带在url中，又由于我们没写action属性，所以post就会走默认的url，所以，url还是刚刚的url，然后，我们只需要对title做一个更新即可:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">depart_edit</span>(<span class="params">request, nid</span>):</span></span><br><span class="line">	<span class="string">&quot;&quot;&quot;修改部门&quot;&quot;&quot;</span></span><br><span class="line">	<span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">		<span class="comment"># 根据nid,获取它的数据</span></span><br><span class="line">		row_object = models.Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">		<span class="keyword">return</span> render(request, <span class="string">&#x27;depart_edit.html&#x27;</span>, &#123;<span class="string">&#x27;row_object&#x27;</span>: row_object&#125;)</span><br><span class="line">	<span class="comment"># 根据id找到数据库中的数据并进行更新</span></span><br><span class="line">	title = request.POST.get(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">	models.Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).update(title=title)</span><br><span class="line">	<span class="keyword">return</span> redirect(<span class="string">&#x27;/depart/list/&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h5 id="模板的继承"><a href="#模板的继承" class="headerlink" title="模板的继承"></a>模板的继承</h5><p>我们之前写的部门列表，添加部门，编辑部门都用到了一些相同的页面，比如导航栏，这些都是重复的；其实这个三个页面很多部分都是重复的，这样导致我们使用起来就不太方便</p>
<p>在django中支持模板的继承，我们一些重复的代码可以写在模板中，我们把container中的东西挖空，然后在templates目录中新建一个layout.html，把layout.html作为一个模板:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>部门列表<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap-3.4.1/css/bootstrap.min.css&#x27;%&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--下面的样式用于去掉导航栏的圆角--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.navbar</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">border-radius</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-default&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-1&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span> 联通用户管理系统 <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Collect the nav links, forms, and other content for toggling --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          修改下面两个li标签，第一个改为部门管理，第二个改为用户管理--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/depart/list&quot;</span>&gt;</span>部门管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          下拉菜单删除--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--        &lt;li class=&quot;dropdown&quot;&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          &lt;a href=&quot;#&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; role=&quot;button&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt;Dropdown &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/a&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          &lt;ul class=&quot;dropdown-menu&quot;&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;One more separated link&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          &lt;/ul&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--        &lt;/li&gt;--&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--        输入框删除--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--      &lt;form class=&quot;navbar-form navbar-left&quot;&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--        &lt;div class=&quot;form-group&quot;&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--          &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Search&quot;&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--        &lt;/div&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--        &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Submit&lt;/button&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--      &lt;/form&gt;--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          修改下面这个li标签，成为登录按钮， 这里先做部分修改--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--          下面这个下拉框，我们可以用于登录后显示用户信息，这里先做个修改案例--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>lihoujian<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>个人资料<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>我的信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>我的爱好<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>注销<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.navbar-collapse --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.container-fluid --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/jQuery-3.6.1.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;plugins/bootstrap-3.4.1.js/bootstrap.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其中，我们把原来的class=container的div替换成了<code>&#123;% block content %&#125;&#123;% endblock %&#125;`，这就表示继承这个模板的文件只需要写这部分内容即可

这里写一个示例index.html，用于继承这个模板:

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends layout.html %&#125;</span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">&lt;h1&gt;首页&lt;/h1&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

`&#123;% extends layout.html %&#125;`表示引入`layout.html`这个模板文件，然后里面`&#123;% block content %&#125;`和`&#123;% endblock %&#125;</code>中间就写我们的html内容，这里面的<code>&lt;h1&gt;首页&lt;/h1&gt;</code>就会把模板的<code>&#123;% block content %&#125;`和`&#123;% endblock %&#125;</code>替换掉</p>
<p>有了模板之后我们很多的代码都可以省略掉</p>
<p>我们想在这三个页面中新加一个菜单，那就可以在模板中直接修改，那么将会作用于这三个页面</p>
<h5 id="用户列表展示"><a href="#用户列表展示" class="headerlink" title="用户列表展示"></a>用户列表展示</h5><p>和部门列表展示是一样的，我们这里就不赘述了，不然这个笔记的篇幅就很大，和前面的实现是很类似的</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qFLtMQ"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/18/qFLtMQ.png"
                      alt="qFLtMQ.png"
                ></a></p>
<h5 id="添加用户-原始方法"><a href="#添加用户-原始方法" class="headerlink" title="添加用户(原始方法)"></a>添加用户(原始方法)</h5><p>用之前的方法就是原始方法</p>
<p>新建方法有两种方法:</p>
<ul>
<li><p>原始方式实现: 这个比较麻烦，但是这是实现的本质</p>
</li>
<li><p>Django组件</p>
<ul>
<li>Form组件(小简便)</li>
<li>ModelForm组件(最简便)</li>
</ul>
<p>要想使用ModelForm，我们先要理解Form</p>
</li>
</ul>
<p>这个和前面添加部门是很类似的</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qAF8aT"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s1.ax1x.com/2022/03/19/qAF8aT.png"
                      alt="qAF8aT.png"
                ></a></p>
<p>到这里我把我的项目进行一个上传，为一个初始版本</p>
<h5 id="Model和ModelForm"><a href="#Model和ModelForm" class="headerlink" title="Model和ModelForm"></a>Model和ModelForm</h5><p>上面我们用普通方法已经实现了添加用户的，但是这里有几点是不太方便的，首先一个比较核心的点，<strong>用户提交的数据我们没有经过任何有验证</strong>，起码输入不能为空，如果要校验的话，我们得拿到这几个字段一个一个校验，如果一个一个校验的话，那就需要写好多的逻辑代码，这种方法是不可取的；然后就是在<strong>页面上缺少一个错误提示</strong></p>
<p>然后就是一个这样的问题，我们<strong>如果有很多个很多个字段，那么在写添加页面的时候就得写同等数量的输入框</strong>，这个也是比较繁琐的</p>
<p>如果有一些下拉框，我们<strong>还得亲自去表里面关联数据</strong>，并且把它当做数据传到前端页面，前端页面还得在这循环，然后把每一个数据展现出来，所以你会发现在这里它关联的数据还需要咱们手动去获取并展示在页面中</p>
<p>如果我们非得用这个模式开发，就会漏洞百出，或者就是说自己做的事太多太多了</p>
<p>我们总结下上一种方法的不方便之处:</p>
<ul>
<li>用户提交数据没有校验</li>
<li>页面上没有错误提示</li>
<li>每一个字段都需要我们重新写一遍</li>
<li>关联的数据需要手动去获取并展示在页面</li>
</ul>
<p>真正用django开发我们不会这么干，我们会用组件，用组件来帮我们把以上这些事全做了</p>
<p>下面我们先来说说Form组件:</p>
<h6 id="初识Form组件"><a href="#初识Form组件" class="headerlink" title="初识Form组件"></a>初识Form组件</h6><p>可以理解为它可以自动做前三个事，最后一个事要完成它还得写点代码</p>
<p>我们首先来看一个例子:</p>
<p>views.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyForm</span>(<span class="params">Form</span>):</span></span><br><span class="line">	user = forms.CharField(widget=form.Inputs)</span><br><span class="line">    pwd = form.CharField(widget=form.Inputs)</span><br><span class="line">    email = form.CharField(widget=form.Inputs)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_add</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        form = MyForm()</span><br><span class="line">        <span class="keyword">return</span> render(request, &#123;<span class="string">&#x27;form&#x27;</span>: form&#125;)</span><br></pre></td></tr></table></figure>

<p><code>widget=form.Inputs</code>会自动生成一个输入框</p>
<p>user.add.html:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">	&#123;&#123; form.user &#125;&#125;</span><br><span class="line">    &#123;&#123; form.pwd &#125;&#125;</span><br><span class="line">    &#123;&#123; form.email &#125;&#125;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>像以上这么写就能自动生成html标签</p>
<p>上面其实还可以更简便，直接用循环:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">	&#123;% <span class="keyword">for</span> field <span class="keyword">in</span> <span class="built_in">format</span> %&#125;</span><br><span class="line">    &#123;&#123; field &#125;&#125;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>如果我们使用Form组件的话，那这些字段，比如上面MyForm这个类里面的字段都需要我们预定义，如果使用ModelForm组件的话就更简单了</p>
<h6 id="ModelForm-推荐"><a href="#ModelForm-推荐" class="headerlink" title="ModelForm(推荐)"></a>ModelForm(推荐)</h6><p>比如说这里有一个models.py:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Department</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">	<span class="string">&quot;&quot;&quot;部门表&quot;&quot;&quot;</span></span><br><span class="line">	title = models.CharField(verbose_name=<span class="string">&#x27;标题&#x27;</span>, max_length=<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">	<span class="string">&quot;&quot;&quot;员工表&quot;&quot;&quot;</span></span><br><span class="line">	name = models.CharField(verbose_name=<span class="string">&#x27;姓名&#x27;</span>, max_length=<span class="number">16</span>)</span><br><span class="line">	password = models.CharField(verbose_name=<span class="string">&#x27;密码&#x27;</span>, max_length=<span class="number">64</span>)</span><br><span class="line">	age = models.IntegerField(verbose_name=<span class="string">&#x27;年龄&#x27;</span>)</span><br><span class="line">	account = models.DecimalField(verbose_name=<span class="string">&#x27;账户余额&#x27;</span>, max_digits=<span class="number">10</span>, decimal_places=<span class="number">2</span>, default=<span class="number">0</span>)</span><br><span class="line">	create_time = models.DateTimeField(verbose_name=<span class="string">&#x27;入职时间&#x27;</span>)</span><br><span class="line">	depart = models.ForeignKey(to=<span class="string">&quot;Department&quot;</span>, to_field=<span class="string">&quot;id&quot;</span>, on_delete=models.CASCADE)</span><br><span class="line">	gender_choices = (</span><br><span class="line">		(<span class="number">1</span>, <span class="string">&#x27;男&#x27;</span>),</span><br><span class="line">		(<span class="number">2</span>, <span class="string">&#x27;女&#x27;</span>),</span><br><span class="line">	)</span><br><span class="line">	gender = models.SmallIntegerField(verbose_name=<span class="string">&#x27;性别&#x27;</span>, choices=gender_choices)</span><br></pre></td></tr></table></figure>

<p>那么我们就可以对views.py做一个更好的优化:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyForm</span>(<span class="params">ModelForm</span>):</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        meta = UserInfo</span><br><span class="line">        field = [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;account&#x27;</span>, <span class="string">&#x27;create_time&#x27;</span>, <span class="string">&#x27;depart&#x27;</span>, <span class="string">&#x27;gender&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>相比来说ModelForm会更方便得多</p>
<h5 id="基于ModelForm的用户添加"><a href="#基于ModelForm的用户添加" class="headerlink" title="基于ModelForm的用户添加"></a>基于ModelForm的用户添加</h5><p>点击<a class="link"   target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1NL41157ph?p=30&spm_id_from=333.1007.top_right_bar_window_history.content.click" >跳转视频<i class="fas fa-external-link-alt"></i></a></p>
<p>这边我们在user_list.html中再加入一个按钮，用来实验基于ModelForm的用户添加:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.15z8pbmrago0.webp"
                      alt="图片"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.4s8sbt4kbqio.webp"
                      alt="图片"
                ></p>
<p>然后我们来写上一个路由:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.k4ez0f6hnhc.webp"
                      alt="图片"
                ></p>
<p>然后我们来完成视图函数:</p>
<p>在写视图函数之前我们要先写一个类，导入需要显示的表格:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220321105308220.png"
                      alt="image-20220321105308220"
                ></p>
<p>然后我们再继续完成核心的视图函数:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.62vhzlvnnaps.webp"
                      alt="图片"
                ></p>
<p>就如上图所示的一样，我们首先需要构造一个form对象，然后把这个form对象传递到对应的html页面中</p>
<p>然后我们只需要几行代码就能生成如下所示的几个输入框:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220321105558697.png"
                      alt="image-20220321105558697"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.jxbr4zl0j8w.webp"
                      alt="图片"
                ></p>
<p>由于我们在构建模型类的时候就指定了verbose_name，那么我们就可以将它显示在html页面中，可以像如下操作:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.3sb606c8fe2o.webp"
                      alt="图片"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.3r57ylcudz7k.webp"
                      alt="图片"
                ></p>
<p>这里要注意哈，虽然这里的名称什么的是关联着models.py中的verbosename，但是这里要用<code>.label</code></p>
<p>如果我们在models.py这个模型类中新增了几个字段，比如在UserInfo中新加入<code>height</code>、<code>weight</code>等，我们又要去html页面中修改嘛，其实是不用的，我们可以做如下修改:</p>
<p>form是可以被for循环的</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.3ivd8b7antog.webp"
                      alt="图片"
                ></p>
<p>ModelForm还会自动生成下拉框，它会自动查数据库:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.74h6kxzc8qkg.webp"
                      alt="图片"
                ></p>
<p>如果写要加上depart就直接写depart即可，前面说过，由于depart关联了别的表的id这一列，所以它会在数据库中自动改名为depart_id，但是我们在使用modelforl时就直接写在models.py中所定义的名字即可，但是还有定义一个verbosename，不然在前端中就会直接显示depart这个单词</p>
<p>但是在我们修改好以上所提到的后，发现有一个这样的问题:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.3m7hrptwhugw.webp"
                      alt="图片"
                ></p>
<p>为什么这里显示<code>Department object()</code>呢，这是因为这里展现的是一个个对象，这里的下拉框实际上是遍历了一个queryset(通过models.Department.objects.all()拿到)，而我们知道这个queryset就类似与一个列表中放了好多个对象；django底层是比较粗暴地直接就显示了这个对象，就如下面的例子一样:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo</span>(<span class="params">objects</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">obj = Foo()</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br></pre></td></tr></table></figure>

<p>这就会直接打印出这个对象:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.3z73kindc5z4.webp"
                      alt="图片"
                ></p>
<p>那如果我想让它在输出对象的时候输出一个其他的东西，可以像如下修改:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.5c06tcx2yiyo.webp"
                      alt="图片"
                ></p>
<p>在输出对象时，如果想要定制显示的内容，我们可以去类的内部定义一个<code>__str__</code>方法，那么这个对象输出的内容就变成我们定制的内容了</p>
<p>我们还可以这样定制:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">demo</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line">obj = demo(<span class="string">&quot;张珊&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br></pre></td></tr></table></figure>

<p>所以在我们的项目中可以这么修改，我们返回对象的title属性即可:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.54r9ckzd00w0.webp"
                      alt="图片"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.3ghsvsbd222o.webp"
                      alt="图片"
                ></p>
<p>经过上面的一些修改，大体框架已经实现了，接下来我们需要加入bootstrap，我们可以把前端代码修改如下:</p>
<p>user_model_form_add.html:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends <span class="string">&#x27;layout.html&#x27;</span> %&#125;</span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;!--        加入面板--&gt;</span></span><br><span class="line"><span class="class">    &lt;div <span class="keyword">class</span>=&quot;panel panel-default&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;div <span class="keyword">class</span>=&quot;panel-heading&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;h3 <span class="keyword">class</span>=&quot;panel-title&quot;&gt;新建用户&lt;/h3&gt;</span></span><br><span class="line"><span class="class">        &lt;/div&gt;</span></span><br><span class="line"><span class="class">        &lt;div <span class="keyword">class</span>=&quot;panel-body&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;!--                面板的内容我们写表单--&gt;</span></span><br><span class="line"><span class="class">            &lt;form method=&quot;post&quot;&gt;</span></span><br><span class="line"><span class="class">                &#123;% csrf_token %&#125;</span></span><br><span class="line"><span class="class">                &#123;% <span class="keyword">for</span> field <span class="keyword">in</span> form %&#125;</span></span><br><span class="line"><span class="class">                &lt;div <span class="keyword">class</span>=&quot;form-group&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;label&gt;&#123;&#123; field.label &#125;&#125;&lt;/label&gt;</span></span><br><span class="line"><span class="class">                        &#123;&#123; field &#125;&#125;</span></span><br><span class="line"><span class="class">                &lt;/div&gt;</span></span><br><span class="line"><span class="class">                &#123;% endfor %&#125;</span></span><br><span class="line"><span class="class">                &lt;!--                    &lt;div <span class="keyword">class</span>=&quot;form-group&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                        &lt;label <span class="keyword">class</span>=&quot;col-sm-2 co ntrol-label&quot;&gt;保存&lt;/label&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                        &lt;div <span class="keyword">class</span>=&quot;col-sm-10&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                            &lt;<span class="built_in">input</span> <span class="built_in">type</span>=&quot;password&quot; <span class="keyword">class</span>=&quot;form-control&quot; <span class="built_in">id</span>=&quot;inputPassword3&quot; placeholder=&quot;Password&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                        &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                    &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                    &lt;div <span class="keyword">class</span>=&quot;form-group&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                        &lt;div <span class="keyword">class</span>=&quot;col-sm-offset-2 col-sm-10&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                            &lt;div <span class="keyword">class</span>=&quot;checkbox&quot;&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                                &lt;label&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                                    &lt;<span class="built_in">input</span> <span class="built_in">type</span>=&quot;checkbox&quot;&gt; Remember me--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                                &lt;/label&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                            &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                        &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;!--                    &lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="class">                &lt;button <span class="built_in">type</span>=&quot;submit&quot; <span class="keyword">class</span>=&quot;btn btn-primary&quot;&gt;提交&lt;/button&gt;</span></span><br><span class="line"><span class="class">            &lt;/form&gt;</span></span><br><span class="line"><span class="class">        &lt;/div&gt;</span></span><br><span class="line"><span class="class">    &lt;/div&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;/div&gt;</span></span><br><span class="line"><span class="class">&#123;% endblock %&#125;</span></span><br></pre></td></tr></table></figure>

<p>但这个时候我们发现这咋和之前的添加用户那个页面不一样，这是因为django自动生成的input标签啥样式也没带，所以就会显示 如下:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.oi5l6tv33kw.webp"
                      alt="图片"
                ></p>
<p>经过对比我们会发现，这个和之前添加用户的表单只差了个<code>class = form-control</code>的属性</p>
<p>这个时候我们应该怎么修改呢，我们可以在views.py中的UserModelForm类中加一个插件:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.792b1tmrh6gw.webp"
                      alt="图片"
                ></p>
<p>但是这看起来又有点傻瓜式操作了，要是很多个输入框那就得傻傻地写很多个了</p>
<p>我们可以重新定义<code>__init__</code>方法</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.778xd7qrlchs.webp"
                      alt="图片"
                ></p>
<p>如上图所示我们重写了<code>__init__</code>方法，然后打印了<code>field.items()</code>，可以从控制台中看出，这就是我django定义表单的一些对象，我们在此就可以通过插件修改这个对象，让它在生成html代码的时候加上<code>class = form-control</code>:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.2ey6q8vyx4e8.webp"
                      alt="图片"
                ></p>
<p>如果你不想让某个input标签用上某个属性，可以选择跳过:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220321152241360.png"
                      alt="image-20220321152241360"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.3c6pz27hm0u8.webp"
                      alt="图片"
                ></p>
<p>这个时候其实我们还可以加上一个<code>palceholder</code>属性，让输入框中有个提示的文字</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.5ek5khoveb28.webp"
                      alt="图片"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.739rd7yfuyyo.webp"
                      alt="图片"
                ></p>
<h5 id="用户添加错误提示"><a href="#用户添加错误提示" class="headerlink" title="用户添加错误提示"></a>用户添加错误提示</h5><p>刚刚我们已经写好了基于ModelForm的用户提交，在没有action的情况下，会默认提交到当前地址，和之前一样，我们在此需要做一个判断，如果是get请求，就显示用户添加页面，如果是post请求那就要获取提交过来的数据:</p>
<p>我们首先修改views.py:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.40v2am17o9c0.webp"
                      alt="图片"
                ></p>
<p>然后我们再修改user_model_form_add.html:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.2if8i4cg8j9c.webp"
                      alt="图片"
                ></p>
<p>那django默认帮我们验证输入是否为空，那有时候我们可能输入了一些错误的信息，那该如何校验呢</p>
<p>比如说用户名的长度，比如是大于个多少，如果我们要设置用户名的长度必须是大于等于3呢，可以像如下修改:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.5jvo0oc8yrnk.webp"
                      alt="图片"
                ></p>
<p>然后当我们输入少于三个字符的用户名时，就会报错:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.5pjon8xmgdmo.webp"
                      alt="图片"
                ></p>
<p>我们的密码也可以用正则表达式做一个验证，可以像下面这样写:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.37h5zrf2s39c.webp"
                      alt="图片"
                ></p>
<p>这里面的验证规则非常非常多，这里就不一一列举了</p>
<p>到现在这个程度，我们发现这英文看着不太好，我们可以把它修改为中文的:</p>
<p>打开settings.py，然后找到<code>LANGUAGE_CODE = &#39;en-us&#39;</code>，可以把en-us改成zh-hans，这就会显示中文了</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/stormwasd/image-hosting@master/20220321/%E5%9B%BE%E7%89%87.20ui8fvsx10g.webp"
                      alt="图片"
                ></p>
<p>入职时间其实还可以通过导入一个gs插件来让用户选，而不再用户自己输入</p>
<p>其实不知道大家发现没有，这里点击提交后，如果出现错误，后面返回回来，还是会显示之前输入的数据，这是比较好的，就是说在上一次的基础上还能继续写</p>
<p>这个笔记初级阶段就到这里结束了，下次将更新高级阶段，高级阶段包括Ajax提交，分页，以及相关数据的提交</p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Post title：Django项目体验--Django安装</li>
        <li>Post author：Lhj</li>
        <li>Create time：2022-03-11 16:49:30</li>
        <li>
            Post link：https://keep.xpoet.cn/2022/03/11/Django联通用户管系统笔记--初级/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2022/03/19/Python%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%9A%84%E6%AD%A5%E9%AA%A4/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Python创建虚拟环境的步骤</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2022/03/11/%E5%85%B3%E4%BA%8EJS%E8%B0%83%E8%AF%95%E7%94%A8xhr%E6%89%93%E6%96%AD%E7%82%B9%E6%B2%A1%E6%9C%89%E5%81%9C%E4%BD%8F%E7%9A%84%E8%A7%A3%E5%86%B3/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">关于JS调试用xhr打断点没有停住的解决</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;Comments</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: 'nIcO1O6cSVuRH8EROCWwNFWN-gzGzoHsz',
                    appKey: 'qrglokTeum8DXiYRzM4k4NF4',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: '😜 尽情吐槽吧~',
                    lang: 'en'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return '博主';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'Lhj';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Lhj</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalview&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Django"><span class="nav-number">1.</span> <span class="nav-text">安装Django</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">2.</span> <span class="nav-text">创建项目</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%88%E7%AB%AF%E5%88%9B%E5%BB%BA"><span class="nav-number">2.1.</span> <span class="nav-text">终端创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Pycharm%E5%88%9B%E5%BB%BA"><span class="nav-number">2.2.</span> <span class="nav-text">Pycharm创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94"><span class="nav-number">2.3.</span> <span class="nav-text">两种方式对比</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E9%BB%98%E8%AE%A4%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="nav-number">3.</span> <span class="nav-text">项目默认文件介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#App%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E8%AF%B4%E6%98%8E"><span class="nav-number">4.</span> <span class="nav-text">App的创建和说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E8%BF%90%E8%A1%8CDjango"><span class="nav-number">5.</span> <span class="nav-text">启动运行Django</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B"><span class="nav-number">5.1.</span> <span class="nav-text">快速上手</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%8D%E5%86%99%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2"><span class="nav-number">5.2.</span> <span class="nav-text">再写一个页面</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E5%92%8C%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6"><span class="nav-number">6.</span> <span class="nav-text">模板和静态文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Django%E7%9A%84%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95"><span class="nav-number">7.</span> <span class="nav-text">Django的模板语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-%E4%BC%AA%E8%81%94%E9%80%9A%E6%96%B0%E9%97%BB%E4%B8%AD%E5%BF%83"><span class="nav-number">7.1.</span> <span class="nav-text">案例: 伪联通新闻中心</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94"><span class="nav-number">8.</span> <span class="nav-text">请求和响应</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B"><span class="nav-number">8.1.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-number">9.</span> <span class="nav-text">数据库的操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97"><span class="nav-number">9.1.</span> <span class="nav-text">安装第三方模块</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ORM%E8%83%BD%E5%81%9A%E5%95%A5%E5%AD%90"><span class="nav-number">9.2.</span> <span class="nav-text">ORM能做啥子</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93-%E8%87%AA%E5%B7%B1%E5%88%9B%E5%BB%BA"><span class="nav-number">9.3.</span> <span class="nav-text">创建数据库(自己创建)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Django%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">9.4.</span> <span class="nav-text">Django连接数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Django%E6%93%8D%E4%BD%9C%E8%A1%A8"><span class="nav-number">9.5.</span> <span class="nav-text">Django操作表</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="nav-number">9.5.1.</span> <span class="nav-text">类创建表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E6%B7%BB%E5%8A%A0%E8%A1%A8"><span class="nav-number">9.5.2.</span> <span class="nav-text">类添加表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="nav-number">9.5.3.</span> <span class="nav-text">类删除表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="nav-number">9.5.4.</span> <span class="nav-text">类修改表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A1%A8%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="nav-number">9.5.5.</span> <span class="nav-text">表的增删改查</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A2%9E"><span class="nav-number">9.5.6.</span> <span class="nav-text">增</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%A0"><span class="nav-number">9.5.7.</span> <span class="nav-text">删</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5"><span class="nav-number">9.5.8.</span> <span class="nav-text">查</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%94%B9"><span class="nav-number">9.5.9.</span> <span class="nav-text">改</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="nav-number">10.</span> <span class="nav-text">案例-用户管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%95%E7%A4%BA%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8"><span class="nav-number">10.1.</span> <span class="nav-text">展示用户列表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="nav-number">10.2.</span> <span class="nav-text">添加用户</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="nav-number">10.3.</span> <span class="nav-text">删除用户</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%E6%A6%82%E8%A6%81-%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="nav-number">11.</span> <span class="nav-text">案例概要(员工管理系统)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%92%8Capp"><span class="nav-number">11.1.</span> <span class="nav-text">创建项目和app</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E7%BB%93%E6%9E%84%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="nav-number">11.2.</span> <span class="nav-text">表结构的创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="nav-number">11.3.</span> <span class="nav-text">生成数据库表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="nav-number">11.4.</span> <span class="nav-text">静态文件管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%83%A8%E9%97%A8%E7%AE%A1%E7%90%86"><span class="nav-number">11.5.</span> <span class="nav-text">部门管理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%83%A8%E9%97%A8%E5%88%97%E8%A1%A8%E5%B1%95%E7%A4%BA"><span class="nav-number">11.5.1.</span> <span class="nav-text">部门列表展示</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%83%A8%E9%97%A8%E5%88%97%E8%A1%A8%E5%B1%95%E7%A4%BA-%E7%BB%AD%E4%B9%8B%E4%BD%BF%E7%94%A8%E4%B8%8A%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">11.5.2.</span> <span class="nav-text">部门列表展示(续之使用上数据库)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E9%83%A8%E9%97%A8"><span class="nav-number">11.5.3.</span> <span class="nav-text">添加部门</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E9%83%A8%E9%97%A8"><span class="nav-number">11.5.4.</span> <span class="nav-text">删除部门</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BC%96%E8%BE%91%E9%83%A8%E9%97%A8"><span class="nav-number">11.5.5.</span> <span class="nav-text">编辑部门</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="nav-number">11.5.6.</span> <span class="nav-text">模板的继承</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E5%B1%95%E7%A4%BA"><span class="nav-number">11.5.7.</span> <span class="nav-text">用户列表展示</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7-%E5%8E%9F%E5%A7%8B%E6%96%B9%E6%B3%95"><span class="nav-number">11.5.8.</span> <span class="nav-text">添加用户(原始方法)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Model%E5%92%8CModelForm"><span class="nav-number">11.5.9.</span> <span class="nav-text">Model和ModelForm</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%88%9D%E8%AF%86Form%E7%BB%84%E4%BB%B6"><span class="nav-number">11.5.9.1.</span> <span class="nav-text">初识Form组件</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#ModelForm-%E6%8E%A8%E8%8D%90"><span class="nav-number">11.5.9.2.</span> <span class="nav-text">ModelForm(推荐)</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8EModelForm%E7%9A%84%E7%94%A8%E6%88%B7%E6%B7%BB%E5%8A%A0"><span class="nav-number">11.5.10.</span> <span class="nav-text">基于ModelForm的用户添加</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E6%B7%BB%E5%8A%A0%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA"><span class="nav-number">11.5.11.</span> <span class="nav-text">用户添加错误提示</span></a></li></ol></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
